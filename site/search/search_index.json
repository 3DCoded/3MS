{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the 3MS Documentation","text":"<p>The 3MS is short for MMMS, which stands for Modular Multi Material System</p>"},{"location":"#inspiration","title":"Inspiration","text":"<ul> <li>Prusa MMU1</li> <li>Bambu AMS</li> </ul>"},{"location":"#why-3ms","title":"Why 3MS?","text":"<p>Why use the 3MS when there are many other multi-material systems? </p> <p>Here are a few reasons:</p> <ul> <li>Extremely simple design increases reliability</li> <li>Extensive documentation to help setup, optomize, and troubleshoot</li> <li>No slicer custom G-Code needed</li> <li>Easily expandable to any number of filaments</li> <li>No need to fine tune tip shaping</li> </ul> <p>With that said, there are a few reasons why you might not want to/be able to use the 3MS:</p> <ul> <li>Klipper firmware is a requirement, so Marlin and RRF setups are a no go</li> <li>A strong, dual drive extruder is highly recommended, so budget printers may need to upgrade their extruders first</li> </ul>"},{"location":"#how-it-works","title":"How it works","text":"<p>Here is a example step by step of what goes on during a single 3MS toolchange from T0 to T1:</p> <ol> <li>Tip shaping and filament unload is performed by the slicer</li> <li>The 3MS unloads T0 100mm at 4500mm/min (75mm/s)</li> <li>The 3MS loads T1 105mm at 4500mm/min</li> <li>The 3MS motors are turned off</li> <li>The printer loads the filament to the nozzle</li> </ol>"},{"location":"#what-about-the-3dchameleon","title":"What about the 3DChameleon?","text":"<p>I recently created a klipper plugin for the 3DChameleon after purchasing a unit. I'm sure my Chameleon could have worked if I had tuned it further, but after several months with only partial success, I gave up. I am still open to pull requests for 3dchameleon-klipper, but I won't be able to test it myself anymore.</p>"},{"location":"instructions/","title":"Master Instructions","text":"<p>Due to the modularity of the 3MS, there are many ways to set it up. This guide attempts to encompass all supported was of setting up the 3MS.</p>"},{"location":"instructions/#basic-steps","title":"Basic Steps","text":"<p>The basic steps this guide will follow are:</p> <ol> <li>Choosing your controller</li> <li>Getting a BOM</li> <li>Assembling your 3MS</li> <li>Configuring your 3MS</li> <li>Stepper motor setup</li> <li>Slicer setup</li> <li>First print</li> <li>Troubleshooting</li> </ol>"},{"location":"instructions/#0-explanations","title":"0. Explanations","text":"<p>Before starting the instructions, a basic understanding of how the 3MS works is recommended. There are two types of components in the 3MS:</p> <ul> <li> <p>Controller</p> <p>This controls the stepper motors</p> </li> <li> <p>Filament Units</p> <p>This moves the filament</p> </li> </ul> <p>The number of filaments you will be able to print with is equal to the number of filament units you have. For example, two filament units will let you print with two colors. It is important to note that one filament unit will NOT let you print in multimaterial.</p>"},{"location":"instructions/#1-choosing-your-controller","title":"1. Choosing your controller","text":"<p>There are many controller options for the 3MS. For each, there are two main deciding factors:</p> <ul> <li>How many filament units does it support?</li> <li>How much does it cost?</li> </ul> <p>Here is a simple table comparing these two factors across all supported controllers:</p> Name Max Filament Units Base cost (no filament units) Cost per filament unit SKR Mini E3 V2 4 $52.40 $20.00 SKR Pico 4 $53.40 $20.00 FYSETC Spyder 8 $59.40 $22.04 SKR 1.4 Turbo 5 $83.40 $20.00 <p>After you have chosen your controller, proceed to step 2.</p>"},{"location":"instructions/#2-getting-a-bom","title":"2. Getting a BOM","text":"<p>After you have chosen the controller you want to use, go to BOM to view the bill of materials for your controller and the number of filament units you want.</p>"},{"location":"instructions/#3-assembling-your-3ms","title":"3. Assembling your 3MS","text":""},{"location":"instructions/#4-configuring-your-3ms","title":"4. Configuring your 3MS","text":""},{"location":"instructions/#5-stepper-motor-setup","title":"5. Stepper motor setup","text":""},{"location":"instructions/#6-slicer-setup","title":"6. Slicer setup","text":""},{"location":"instructions/#7-first-print","title":"7. First print","text":""},{"location":"instructions/#8-troubleshooting","title":"8. Troubleshooting","text":""},{"location":"setup/bom/","title":"Bom","text":""},{"location":"setup/bom/#bom","title":"BOM","text":""},{"location":"setup/bom/#number-of-filament-units","title":"Number of filament units","text":"<p>First, choose the number of filament units you want. Each filament unit lets you print with an additional filament. Two filament units are the minimum. You can add or remove filament units after building, but the BOM and configuration will vary based on how many filament units you want.</p>"},{"location":"setup/bom/#controller-boms","title":"Controller BOMs","text":"<p>Choose one of the following Controller BOMs for whatever controller you want:</p> BTT SKR Mini E3 V2 SKR PicoFYSETC SpyderBTT SKR 1.4 Turbo <p>Max filament units: 4</p> Name Price Quantity Link Notes SKR Mini E3 V2 $34.99 1 Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters <p>Max filament units: 4</p> Name Price Quantity Link Notes SKR Pico $35.99 1 Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters <p>Max filament units: 8</p> Name Price Quantity Link Notes FYSETC Spyder $42.00 1 FYSETC A4988 Stepper Driver $2.04 each # of filament units Amazon Comes in a five pack Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters <p>Max filament units: 5</p> Name Price Quantity Link Notes SKR 1.4 Turbo + 5x TMC2209 $58.98 (BTT), $65.99 (Amazon) 1 BTT Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters"},{"location":"setup/bom/#filament-unit-boms","title":"Filament Unit BOMs","text":"<p>For each filament unit, purchase this BOM:</p> Name Quantity Price Link Notes NEMA17 Stepper Motor 1 $9.99 Amazon You can use a pancake stepper if you want, but it will have less torque MK8 Metal Extruder 1 $9.99 Amazon Capricorn PTFE Tubing 1 $11.49 Amazon You likely won't need this for every unit, as this is usually too long for only one unit"},{"location":"setup/configuration/","title":"Configuration","text":""},{"location":"setup/configuration/#configuration","title":"Configuration","text":"<p>Follow this guide to create your 3MS configuration.</p>"},{"location":"setup/configuration/#premade-configurations","title":"Premade Configurations","text":"<p>The easiest way to get a configuration for your 3MS is to download a premade one. Premade configurations are available for the following controllers:</p> <ul> <li>BTT SKR 1.4</li> <li>BTT Skr Pico</li> <li>BTT Skr Mini E3 V2.0 </li> <li>FYSETC Spyder</li> </ul> <p>If your controller is in the list above, use that configuration and skip the rest of this guide. If you are using a different controller, read on.</p>"},{"location":"setup/configuration/#controller-configuration","title":"Controller Configuration","text":"<p>First, find a configuration that works with your control board. Klipper official configurations: Github</p>"},{"location":"setup/configuration/#3ms-configuration","title":"3MS Configuration","text":"<p>After you have downloaded your controller configuration, create a new folder in the same folder as your <code>printer.cfg</code>. Name it <code>3ms</code>. Inside it, copy and paste your controller configuration. In this example, an SKR Pico configuration will be used.</p>"},{"location":"setup/configuration/#only-motors","title":"Only Motors","text":"<p>First, remove all parts of the configuration not about motors/extruders. Example:</p> Before/After BeforeAfter 3ms/skr-pico.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio4\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio3\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^gpio25\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: gpio23\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: gpio27\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[heater_bed]\nheater_pin: gpio21\nsensor_type: ATC Semitec 104GT-2\nsensor_pin: gpio26\ncontrol: pid\npid_Kp: 54.027\npid_Ki: 0.770\npid_Kd: 948.182\nmin_temp: 0\nmax_temp: 130\n\n[fan]\npin: gpio17\n\n[heater_fan heatbreak_cooling_fan]\npin: gpio18\n\n[heater_fan controller_fan]\npin: gpio20\n\n[temperature_sensor pico]\nsensor_type: temperature_mcu\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[printer]\nkinematics: cartesian\nmax_velocity: 300\nmax_accel: 3000\nmax_z_velocity: 5\nmax_z_accel: 100\n\n[neopixel board_neopixel]\npin: gpio24\nchain_count: 1\ncolor_order: GRB\ninitial_RED: 0.3\ninitial_GREEN: 0.3\ninitial_BLUE: 0.3\n\n#[bltouch]\n#sensor_pin: gpio22\n#control_pin: gpio29\n\n#[filament_switch_sensor runout_sensor]\n#switch_pin: ^gpio16\n</code></pre> 3ms/skr-pico.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio4\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio3\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^gpio25\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: gpio23\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: gpio27\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n</code></pre>"},{"location":"setup/configuration/#manual-steppers","title":"Manual Steppers","text":"<p>Next, replace all the <code>stepper_</code>,<code>extruder</code>, and <code>tmc...</code> with <code>[manual_stepper 3ms...]</code> sections, as shown below:</p> Before/After BeforeAfter 3ms/generic-bigtreetech-skr-pico-v1.0.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio4\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio3\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^gpio25\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: gpio23\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: gpio27\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n</code></pre> 3ms/generic-bigtreetech-skr-pico-v1.0.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[manual_stepper 3ms0]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\n\n[tmc2209 manual_stepper 3ms0]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[manual_stepper 3ms1]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\n\n[tmc2209 manual_stepper 3ms1]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[manual_stepper 3ms2]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\n\n[tmc2209 manual_stepper 3ms2]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[manual_stepper 3ms3]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\n\n[tmc2209 manual_stepper 3ms3]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n</code></pre>"},{"location":"setup/configuration/#organization","title":"Organization","text":"<p>Rename your configuration to <code>steppers.cfg</code>. Next, create the following files with these contents:</p> 3ms/main.cfg 3ms/main.cfg<pre><code>[gcode_macro Toolchange]\nvariable_p: -1\ngcode:\n{% set p = printer[\"gcode_macro Toolchange\"].p|int %}\n{% if p &gt; -1 %}\nG100 T{p} E-50 F4500 N0\n{% endif %}\nG100 T{params.T} E55 F4500 N0\nSAVE_GCODE_VARIABLE MACRO=Toolchange VARIABLE=p VALUE={params.T}\n\n[gcode_macro T0]\ngcode:\nToolchange T=0\n\n[gcode_macro T1]\ngcode:\nToolchange T=1\n\n[gcode_macro T2]\ngcode:\n    Toolchange T=2\n\n[gcode_macro T3]\ngcode:\n    Toolchange T=3\n\n[include ./g100.cfg]\n[include ./steppers.cfg]\n</code></pre> 3ms/g100.cfg 3ms/g100.cfg<pre><code>[gcode_macro G100]\ngcode:\n{% set T = params.T|int %}\n{% set E = params.E|default(0)|float %}\n{% set F = params.F|default(3000)|float %}\n{% set N = params.N|default(1)|int %}\n\nMANUAL_STEPPER STEPPER=3ms{T} ENABLE={N} SET_POSITION=0\nMANUAL_STEPPER STEPPER=3ms{T} ENABLE={N} MOVE={E} SPEED={F/60} ACCEL=1000\n</code></pre>"},{"location":"setup/steppers/","title":"Stepper Setup","text":"<p>Follow this guide to calibrate each of the stepper motors.</p>"},{"location":"setup/steppers/#is-the-motor-spinning","title":"Is the motor spinning?","text":"<p>Run this command for each of your filament units, replacing <code>T0</code> with <code>T1</code>, <code>T2</code>, etc.</p> <pre><code>G100 T0 E50 F4500\n</code></pre> <p>If the motor spins, skip to the next step. If not, check your wiring first. If your wiring is fine, go to <code>3ms/steppers.cfg</code>. Locate the section named <code>[manual_stepper 3ms0]</code>, replacing <code>0</code> with the <code>T</code> number of the motor not spinning. In front of the <code>enable_pin</code>, add, an <code>!</code>. If there already is one, remove it. Example:</p> BeforeAfter 3ms/steppers.cfg<pre><code>enable_pin: !arduino: PD7\n</code></pre> 3ms/steppers.cfg<pre><code>enable_pin: arduino: PD7\n</code></pre>"},{"location":"setup/steppers/#is-the-motor-spinning-backwards","title":"Is the motor spinning backwards?","text":"<p>Preload each of the filament units with a piece of scrap filament by pushing the lever to release the tension, inserting filament, then releasing the lever to restore tension. Next, run this command for each of your filament units, replacing <code>T0</code> with <code>T1</code>, <code>T2</code>, etc.</p> <pre><code>G100 T0 E50 F4500\n</code></pre> <p>Note which way the filament moves. If it moves forwards, away from the PTFE coupler, skip to the last step. If it moves backwards, you have two choices:</p> <ul> <li>Switch the motor's wires</li> <li>Invert the pin in the configuration</li> </ul> <p>To invert the pin in the configuration, locate the configuration section for the filament unit spinning backwards, and invert the <code>dir_pin</code>. See the previous section for how to invert the pin.</p>"},{"location":"setup/steppers/#how-far-does-the-filament-move","title":"How far does the filament move?","text":""},{"location":"setup/tableofcontents/","title":"Table of Contents","text":"<ul> <li>BOM</li> <li>Configuration</li> <li>Stepper Setup</li> </ul>"}]}