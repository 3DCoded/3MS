{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the 3MS Documentation","text":"<p>The 3MS is short for MMMS, which stands for Modular Multi Material System</p>"},{"location":"#inspiration","title":"Inspiration","text":"<ul> <li>Prusa MMU1</li> <li>Bambu AMS</li> </ul>"},{"location":"#why-3ms","title":"Why 3MS?","text":"<p>Why use the 3MS when there are many other multi-material systems? </p> <p>Here are a few reasons:</p> <ul> <li>Extremely simple design increases reliability</li> <li>Extensive documentation to help setup, optomize, and troubleshoot</li> <li>No slicer custom G-Code needed</li> <li>Easily expandable to any number of filaments</li> <li>No need to fine tune tip shaping</li> </ul> <p>With that said, there are a few reasons why you might not want to/be able to use the 3MS:</p> <ul> <li>Klipper firmware is a requirement, so Marlin and RRF setups are a no go</li> <li>A strong, dual drive extruder is highly recommended, so budget printers may need to upgrade their extruders first</li> </ul>"},{"location":"#how-it-works","title":"How it works","text":"<p>Here is a example step by step of what goes on during a single 3MS toolchange from T0 to T1:</p> <ol> <li>Tip shaping and filament unload is performed by the slicer</li> <li>The 3MS unloads T0 100mm at 4500mm/min (75mm/s)</li> <li>The 3MS loads T1 105mm at 4500mm/min</li> <li>The 3MS motors are turned off</li> <li>The printer loads the filament to the nozzle</li> </ol>"},{"location":"#what-about-the-3dchameleon","title":"What about the 3DChameleon?","text":"<p>I recently created a klipper plugin for the 3DChameleon after purchasing a unit. I'm sure my Chameleon could have worked if I had tuned it further, but after several months with only partial success, I gave up. I am still open to pull requests for 3dchameleon-klipper, but I won't be able to test it myself anymore.</p>"},{"location":"getstarted/","title":"Get Started","text":"<p>Follow this guide to get started with the 3MS.</p>"},{"location":"getstarted/#bom","title":"BOM","text":"Number of filament units:   Board:  Arduino Nano FYSETC Spyder <p>Update Table</p> <p>Download Configuration JSON</p>"},{"location":"setup/bom/","title":"BOM","text":""},{"location":"setup/bom/#number-of-filament-units","title":"Number of filament units","text":"<p>First, choose the number of filament units you want. Each filament unit lets you print with an additional filament. Two filament units are the minimum. You can add or remove filament units after building, but the BOM and configuration will vary based on how many filament units you want.</p>"},{"location":"setup/bom/#controller-boms","title":"Controller BOMs","text":"<p>Choose one of the following Controller BOMs for whatever controller you want:</p> Arduino Nano (more DIY)SKR PicoFYSETC SpyderBTT SKR 1.4 Turbo <p>Max filament units: 4</p> <p>Use this option if you have most of the parts already.</p> Name Price Quantity Link Notes Arduino Nano $19.99 1 Amazon Comes with three Arduinos but you only need one A4988 Stepper Driver $2.04 each # of filament units Amazon Comes in a five pack Stepper Driver Board $2.66 each # of filament units Amazon Comes in a three pack Breadboard $8.99 1 Amazon Comes with six but you only need one Duponts $9.99 1 Amazon 12V PSU $7.39 1 Amazon <p>Max filament units: 4</p> Name Price Quantity Link Notes SKR Pico $35.99 1 Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters <p>Max filament units: 8</p> Name Price Quantity Link Notes FYSETC Spyder $42.00 1 FYSETC A4988 Stepper Driver $2.04 each # of filament units Amazon Comes in a five pack Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters <p>Max filament units: 5</p> Name Price Quantity Link Notes SKR 1.4 Turbo + 5x TMC2209 $58.98 (BTT), $65.99 (Amazon) 1 BTT Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters"},{"location":"setup/configuration/","title":"Configuration","text":"<p>Follow this guide to create your 3MS configuration.</p>"},{"location":"setup/configuration/#controller-configuration","title":"Controller Configuration","text":"<p>First, find a configuration that works with your control board. Klipper official configurations: Github</p>"},{"location":"setup/configuration/#3ms-configuration","title":"3MS Configuration","text":"<p>After you have downloaded your controller configuration, create a new folder in the same folder as your <code>printer.cfg</code>. Name it <code>3ms</code>. Inside it, copy and paste your controller configuration. In this example, an SKR Pico configuration will be used.</p>"},{"location":"setup/configuration/#only-motors","title":"Only Motors","text":"<p>First, remove all parts of the configuration not about motors/extruders. Example:</p> Before/After BeforeAfter 3ms/skr-pico.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio4\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio3\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^gpio25\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: gpio23\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: gpio27\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[heater_bed]\nheater_pin: gpio21\nsensor_type: ATC Semitec 104GT-2\nsensor_pin: gpio26\ncontrol: pid\npid_Kp: 54.027\npid_Ki: 0.770\npid_Kd: 948.182\nmin_temp: 0\nmax_temp: 130\n\n[fan]\npin: gpio17\n\n[heater_fan heatbreak_cooling_fan]\npin: gpio18\n\n[heater_fan controller_fan]\npin: gpio20\n\n[temperature_sensor pico]\nsensor_type: temperature_mcu\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[printer]\nkinematics: cartesian\nmax_velocity: 300\nmax_accel: 3000\nmax_z_velocity: 5\nmax_z_accel: 100\n\n[neopixel board_neopixel]\npin: gpio24\nchain_count: 1\ncolor_order: GRB\ninitial_RED: 0.3\ninitial_GREEN: 0.3\ninitial_BLUE: 0.3\n\n#[bltouch]\n#sensor_pin: gpio22\n#control_pin: gpio29\n\n#[filament_switch_sensor runout_sensor]\n#switch_pin: ^gpio16\n</code></pre> 3ms/skr-pico.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio4\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio3\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^gpio25\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: gpio23\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: gpio27\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n</code></pre>"},{"location":"setup/configuration/#manual-steppers","title":"Manual Steppers","text":"<p>Next, replace all the <code>stepper_</code>,<code>extruder</code>, and <code>tmc...</code> with <code>[manual_stepper 3ms...]</code> sections, as shown below:</p> Before/After BeforeAfter 3ms/generic-bigtreetech-skr-pico-v1.0.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio4\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^gpio3\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^gpio25\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: gpio23\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: gpio27\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n</code></pre> 3ms/generic-bigtreetech-skr-pico-v1.0.cfg<pre><code># This file contains common pin mappings for the BIGTREETECH SKR Pico V1.0\n# To use this config, the firmware should be compiled for the RP2040 with\n# USB communication.\n\n# The \"make flash\" command does not work on the SKR Pico V1.0. Instead,\n# after running \"make\", copy the generated \"out/klipper.uf2\" file\n# to the mass storage device in RP2040 boot mode\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[manual_stepper 3ms0]\nstep_pin: gpio11\ndir_pin: !gpio10\nenable_pin: !gpio12\nmicrosteps: 16\nrotation_distance: 40\n\n[tmc2209 manual_stepper 3ms0]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[manual_stepper 3ms1]\nstep_pin: gpio6\ndir_pin: !gpio5\nenable_pin: !gpio7\nmicrosteps: 16\nrotation_distance: 40\n\n[tmc2209 manual_stepper 3ms1]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[manual_stepper 3ms2]\nstep_pin: gpio19\ndir_pin: gpio28\nenable_pin: !gpio2\nmicrosteps: 16\nrotation_distance: 8\n\n[tmc2209 manual_stepper 3ms2]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[manual_stepper 3ms3]\nstep_pin: gpio14\ndir_pin: !gpio13\nenable_pin: !gpio15\nmicrosteps: 16\nrotation_distance: 33.500\n\n[tmc2209 manual_stepper 3ms3]\nuart_pin: gpio9\ntx_pin: gpio8\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n</code></pre>"},{"location":"setup/configuration/#organization","title":"Organization","text":"<p>Rename your configuration to <code>steppers.cfg</code>. Next, create the following files with these contents:</p> 3ms/main.cfg 3ms/main.cfg<pre><code>[gcode_macro Toolchange]\nvariable_p: -1\ngcode:\n{% set p = printer[\"gcode_macro Toolchange\"].p|int %}\n{% if p &gt; -1 %}\nG100 T{p} E-50 F4500 N0\n{% endif %}\nG100 T{params.T} E55 F4500 N0\nSAVE_GCODE_VARIABLE MACRO=Toolchange VARIABLE=p VALUE={params.T}\n\n[gcode_macro T0]\ngcode:\nToolchange T=0\n\n[gcode_macro T1]\ngcode:\nToolchange T=1\n\n[gcode_macro T2]\ngcode:\n    Toolchange T=2\n\n[gcode_macro T3]\ngcode:\n    Toolchange T=3\n\n[include ./g100.cfg]\n[include ./steppers.cfg]\n</code></pre> 3ms/g100.cfg 3ms/g100.cfg<pre><code>[gcode_macro G100]\ngcode:\n{% set T = params.T|int %}\n{% set E = params.E|default(0)|float %}\n{% set F = params.F|default(3000)|float %}\n{% set N = params.N|default(1)|int %}\n\nMANUAL_STEPPER STEPPER=3ms{T} ENABLE={N} SET_POSITION=0\nMANUAL_STEPPER STEPPER=3ms{T} ENABLE={N} MOVE={E} SPEED={F/60} ACCEL=1000\n</code></pre>"},{"location":"setup/tableofcontents/","title":"Table of Contents","text":"<ul> <li>BOM</li> <li>Configuration</li> </ul>"}]}