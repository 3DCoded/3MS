{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the 3MS Documentation","text":"<p>The 3MS is short for MMMS, which stands for Modular Multi Material System</p> <p></p>"},{"location":"#inspiration","title":"Inspiration","text":"<ul> <li>Prusa MMU1</li> <li>Bambu AMS</li> </ul>"},{"location":"#sample-prints","title":"Sample Prints","text":"Sample Prints SheepCalendarVoron CubeT-RexLizard <p>Model: Sheep by Cipis</p> <p></p> <p>Model: Monolith Cryptic Calendar by Sevro</p> <p></p> <p>Model: Voron Cube (bundled with OrcaSlicer), painted by me in OrcaSlicer</p> <p></p> <p>Printed at 50% scale</p> <p>Model: T-rex by Cipis</p> <p></p> <p>Model: Striped lizard with pupils by EngMike</p>"},{"location":"#photos","title":"Photos","text":"Photos Full Printer3MSY Splitter"},{"location":"#videos","title":"Videos","text":"West3D Video Series <p>Thank you to Allen Rowand from West3D for making this ongoing series on the 3MS.</p> <p></p> <p></p>"},{"location":"#why-3ms","title":"Why 3MS?","text":"<p>Why use the 3MS when there are many other multi-material systems? </p> <p>Here are a few reasons:</p> <ul> <li>Simplified Design: Minimal mechanical complexity for increased reliability.</li> <li>Comprehensive Documentation: Step-by-step guides to ensure smooth setup and operation.</li> <li>Slicer-Agnostic: No need for custom toolchange G-Code in your slicer.</li> <li>Scalable: Easily expand the system to handle up to four filaments, with future potential for more.</li> <li>Auto-Retries: Automatic retries on failed tool changes to reduce downtime.</li> <li>No Filament Cutter Needed: Achieve clean tool changes without the need for tip shaping or filament cutters.</li> </ul> <p>With that said, there are a few reasons why you might not want to/be able to use the 3MS:</p> <ul> <li>Klipper firmware is a requirement, so Marlin and RRF setups are a no go</li> <li>A filament sensor is required, so if you don't have one/don't plan to get one, the 3MS won't work with your setup</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<p>To use the 3MS, your setup has to meet the following requirements:</p> <ul> <li>Run Klipper firmware</li> <li>Have SSH (PuTTY) access (99.9% of Klipper installations have this, and if you don't you really should setup SSH)</li> <li>Have one spare USB port</li> <li>Have an adapter to install a PTFE tube to the inlet of your printer's extruder.</li> </ul>"},{"location":"#how-it-works","title":"How it works","text":"<p>Here is a example step by step of what goes on during a single 3MS toolchange from T0 to T1:</p> <ol> <li>The slicer performs tip shaping and filament unloading.</li> <li>3MS unloads T0 by 200mm at 4500mm/min (75mm/s).</li> <li>T0 is desynced from the extruder.</li> <li>Filament unloading is verified.</li> <li>T1 is synced with the extruder.</li> <li>3MS loads T1 by 210mm at 4500mm/min.</li> <li>Filament loading is verified.</li> <li>The printer loads the filament to the nozzle.</li> </ol> <p>For more detail about the Tx command, see Flowchart.</p> <p>Think of the 3MS as an extension to your current extruder's length. It allows for switching filaments without compromising any of the benefits of your printer's extruder.</p> <p>The 3MS's motors work together with your printer's extruder. This way, there won't be any additional resistance from pulling the filament through a disabled extruder. Also, unloads and loads to/from the printer's extruder are fully synchronized with the 3MS. This allows for even faster toolchanges!</p>"},{"location":"#get-started","title":"Get Started","text":"<p>To get started with the 3MS, see the Master Instructions.</p> <p>Get Started </p>"},{"location":"#what-about-the-3dchameleon","title":"What about the 3DChameleon?","text":"<p>I recently created a klipper plugin for the 3DChameleon after purchasing a unit. I'm sure my Chameleon could have worked if I had tuned it further, but after several months with only partial success, I gave up. I am still open to pull requests for 3dchameleon-klipper and will do my best to respond to issues there, but I won't be able to test it myself anymore.</p> <p>If you are having reliability issues with the 3DChameleon, see 3DChameleon Conversion</p>"},{"location":"compare/","title":"Comparison of Multimaterial Systems","text":"<p>Not sure if you want to use the 3MS? Check this comparison between four common multimaterial systems.</p> <ul> <li> <p>3DChameleon MK4 Automatic Color Changer</p> <p></p> <p>Pros:</p> <p> Compatibility</p> <p> No custom firmware</p> <p> Price ($200)</p> <p>Cons:</p> <p> Reliability</p> <p> Documentation</p> </li> <li> <p>Prusa MMU3 Multi Material Upgrade</p> <p></p> <p>Pros:</p> <p> Reliability</p> <p> Support</p> <p> Documentation</p> <p>Cons:</p> <p> Compatibility</p> <p> Price ($300)</p> </li> <li> <p>ERCF v2 An expandable MMU for Klipper-based 3D-printers</p> <p></p> <p>Pros:</p> <p> Reliability</p> <p> Modular Design</p> <p> Active Community</p> <p> Documentation</p> <p>Cons:</p> <p> Compatibility (only Klipper)</p> <p> Complexity</p> </li> <li> <p>3MS Modular Multimaterial System for Klipper 3D Printers</p> <p></p> <p>Pros:</p> <p> Simple Design</p> <p> Reliability</p> <p> Documentation</p> <p> Modular Design</p> <p> Price ($100)</p> <p>Cons:</p> <p> Compatibility (only Klipper)</p> </li> </ul>"},{"location":"flowchart/","title":"Toolchange Flowchart","text":"<p>This flowchart assumes a <code>fsensor_delay</code> of 2000ms.</p> <pre><code>graph TD\n  A[T1] --&gt; B[Toolchange T=1];\n  B[Toolchange T=1] --&gt; C{Same tool?};\n  C --&gt; |No| D{Previous filament loaded?};\n  C --&gt; |Yes| E{Do nothing};\n  D --&gt; |Yes| F[MMMS_UNLOAD];\n  F --&gt; G[DESYNC_TOOL TOOL=0];\n  G --&gt; H[G4 P2000];\n  H --&gt; I[CHECK_FSENSOR V=0];\n  D --&gt; |No| J[SYNC_TOOL TOOL=1];\n  I --&gt; J;\n  J --&gt; K[MMMS_LOAD];\n  K --&gt; L[G4 P2000];\n  L --&gt; M[CHECK_FSENSOR V=1];\n  M --&gt; N[Save new previous extruder]</code></pre>"},{"location":"instructions/","title":"Instructions","text":""},{"location":"instructions/#master-instructions","title":"Master Instructions","text":"<p>Due to the modularity of the 3MS, there are many ways to set it up. This guide attempts to encompass all supported ways of setting up the 3MS.</p>"},{"location":"instructions/#basic-steps","title":"Basic Steps","text":"<p>The basic steps this guide will follow are:</p> <ol> <li>Getting a BOM</li> <li>Assembling your 3MS</li> <li>Configuring your 3MS</li> <li>Stepper motor setup</li> <li>Slicer setup</li> <li>First print</li> <li>Troubleshooting</li> <li>Updating</li> </ol>"},{"location":"instructions/#0-explanations","title":"0. Explanations","text":"<p>Before starting the instructions, a basic understanding of how the 3MS works is recommended. There are two types of components in the 3MS:</p> <ul> <li> <p>Controller</p> <p>This controls the 3MS stepper motors. This is usually an extra 3D printer mainboard purchased specifically for the 3MS. If your existing 3D printer mainboard has spare stepper ports, you can use them for the 3MS. </p> <p>The available configurations are specific to either an external mainboard setup, or utilizing spare stepper ports on your existing mainboard. If you are utilizing spare stepper ports, the name of the config will include \"(main MCU)\"</p> </li> <li> <p>Filament Units</p> <p>These move the filament. These are standard MK8 extruders (used on Ender 3's). You can use different extruders for the filament units, as long as you can mount them securely and they can attach to a PTFE tube. MK8 extruders are used as the default due to their low cost. </p> </li> </ul> <p>The number of filaments you will be able to print with is equal to the number of filament units you have. For example, two filament units will let you print with two colors. It is important to note that one filament unit will NOT let you print in multimaterial.</p>"},{"location":"instructions/#05-choosing-a-controller","title":"0.5. Choosing a Controller","text":"<p>Choose one of the controllers from Controllers before continuing.</p>"},{"location":"instructions/#1-getting-a-bom","title":"1. Getting a BOM","text":"<p>Go to BOM to view the bill of materials for the number of filament units you want. Example BOM for two filament units and a SKR Mini E3 V2:</p> Name Price Quantity Link Notes SKR Mini E3 V2 $34.99 1 Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters NEMA17 Stepper Motor $9.99 2 Amazon You can use a pancake stepper if you want, but it will have less torque MK8 Metal Extruder $9.99 2 Amazon Capricorn PTFE Tubing $11.49 1 Amazon You likely won't need this for every unit, as this is usually too long for only one unit"},{"location":"instructions/#2-assembling-your-3ms","title":"2. Assembling your 3MS","text":"<p>Follow Assembly to assemble your 3MS.</p>"},{"location":"instructions/#3-configuring-your-3ms","title":"3. Configuring your 3MS","text":"<ol> <li>Install Klipper firmware onto the MCU by following Firmware.</li> <li>Install DynamicMacros, following instructions from here.</li> <li>Follow Installation to install the 3MS configuration.</li> <li>Follow Filament Sensor to setup your filament sensor with the 3MS.</li> </ol>"},{"location":"instructions/#4-stepper-motor-setup","title":"4. Stepper motor setup","text":"<p>Follow Stepper Setup to setup and calibrate each of your filament units.</p>"},{"location":"instructions/#5-slicer-setup","title":"5. Slicer setup","text":"<p>Follow Slicer Setup to setup your slicer for the 3MS.</p>"},{"location":"instructions/#6-first-print","title":"6. First print","text":"<p>Follow First Print to create your first multimaterial print with the 3MS.</p>"},{"location":"instructions/#7-troubleshooting","title":"7. Troubleshooting","text":"<p>Check Troubleshooting to find guides to troubleshoot your 3MS.</p>"},{"location":"instructions/#8-updating","title":"8. Updating","text":"<p>To update the 3MS configuration, go to the Update Manager in Mainsail/Fluidd and refresh the updates. </p> <p></p> <p>Next, find the \"mmms\" entry in the list. If there is an \"Update\" button next to it, click it and begin updating. </p> <p>After updating, in your terminal, run:</p> <pre><code>sh ~/3MS/install.sh\n</code></pre> <p>This will install the new 3MS configuration. Next, restart Klipper:</p> <p>Info</p> <p>It is important to restart the Klipper service, and not just run the <code>RESTART</code> command.</p> <p>Run this command in your terminal:</p> <pre><code>sudo service klipper restart\n</code></pre>"},{"location":"configuration/","title":"Configuration","text":"<p>This guide covers the configuration structure and options of the 3MS.</p>"},{"location":"configuration/#maincfg","title":"main.cfg","text":"<p><code>main.cfg</code> is located in <code>3ms/main.cfg</code>. It contains the following:</p> <ul> <li><code>[save_variables]</code> configuration section. This section sets the location where variables about the previous tool will be saved. </li> <li><code>[include]</code> sections. These reference other configuration files covered in this guide. The included configurations are:<ul> <li><code>settings.cfg</code></li> <li><code>macros.cfg</code></li> <li><code>controllers/xxx/steppers.cfg</code></li> </ul> </li> </ul>"},{"location":"configuration/#settingscfg","title":"settings.cfg","text":"<p><code>settings.cfg</code> contains the settings the 3MS uses during toolchanges in <code>macros.cfg</code>. Further information is here.</p>"},{"location":"configuration/#macroscfg","title":"macros.cfg","text":"<p><code>macros.cfg</code> contains the macros the 3MS uses during toolchanges. Further information is here.</p>"},{"location":"configuration/#controllersxxxstepperscfg","title":"controllers/xxx/steppers.cfg","text":"<p><code>steppers.cfg</code> contains the MCU configuration for the 3MS. It contains the following:</p> <ul> <li><code>[extruder_stepper 3msx]</code> This contains the pin mappings for the motor assigned to 3MS tool x.</li> <li><code>[tmc2209 extruder_stepper 3msx]</code> This contains the pin mappings for the TMC2209 controlling the motor assigned to 3MS tool x.</li> <li><code>[mcu 3ms]</code> This contains the serial path to the 3MS MCU.</li> <li>Other sections: These are configuration sections specific to the MCU and should not be modified.</li> </ul>"},{"location":"configuration/#klipperscreenconf","title":"KlipperScreen.conf","text":"<p>This contains the KlipperScreen 3MS menu configuration. For more information, see KlipperScreen.</p>"},{"location":"configuration/fsensor/","title":"Filament Sensor","text":"<p>Follow this guide to configure your filament sensor with the 3MS. </p>"},{"location":"configuration/fsensor/#location-of-sensor","title":"Location of Sensor","text":"<p>The filament sensor should be right before the extruder, and after the Y splitter. Other locations, such as between the hotend and extruder, have not been tested.</p> <p>Warning</p> <p>The 3MS has only been tested with a <code>filament_switch_sensor</code>, and not with a <code>filament_motion_sensor</code></p>"},{"location":"configuration/fsensor/#configuration","title":"Configuration","text":"<p>To configure your filament sensor with the 3MS, open <code>3ms/settings.cfg</code> and change the following (assuming your filament sensor is named \"runout_sensor\"):</p> BeforeAfter 3ms/settings.cfg<pre><code>fsensor_name: \"fsensor\"\n</code></pre> 3ms/settings.cfg<pre><code>fsensor_name: \"runout_sensor\"\n</code></pre>"},{"location":"configuration/install/","title":"Installation","text":"<p>Follow this guide to install the 3MS configuration and macros.</p> <p>Info</p> <p>All SSH commands are run on the Klipper Host (usually a Raspberry Pi) and are labeled like the following: SSH<pre><code>echo Hello World\n</code></pre> Notice the \"SSH\" at the top of the code block.</p> <p>All references to a mainboard usually refer to the 3MS board. If you are using a <code>(main MCU)</code> configuration, references to a mainboard refer to your printer's existing mainboard.</p>"},{"location":"configuration/install/#clone-repository","title":"Clone Repository","text":"<p>First, clone the 3MS repository:</p> SSH<pre><code>cd ~\ngit clone https://github.com/3DCoded/3MS\ncd 3MS\n</code></pre> <p>Storage</p> <p>If the <code>git clone</code> command fails due to lack of storage on your system, run the following set of commands instead:</p> SSH<pre><code>cd ~\ngit clone -b main --single-branch https://github.com/3DCoded/3MS\ncd 3MS\n</code></pre>"},{"location":"configuration/install/#install-script","title":"Install Script","text":"<p>K1 Series</p> <p>If you are setting up the 3MS on a Creality K1 Series printer (K1, K1C, K1 Max), use the following install script instead:</p> SSH<pre><code>python3 install.py --path /usr/data/printer_data/config/3ms\n</code></pre> <p>Run the install script:</p> SSH<pre><code>sh install.sh\n</code></pre>"},{"location":"configuration/install/#printercfg","title":"printer.cfg","text":"<p>In the Klipper web interface (e.g. Mainsail/Fluidd/OctoPrint), open <code>printer.cfg</code> and add:</p> printer.cfg<pre><code>[include 3ms/main.cfg]\n</code></pre>"},{"location":"configuration/install/#dynamicmacros","title":"DynamicMacros","text":"<p>The 3MS configuration depends on DynamicMacros. If you haven't installed it already, follow the instructions here to do so.</p> <p>Remove the following line from your <code>3ms/main.cfg</code> if it exists:</p> 3ms/main.cfg<pre><code>[include ./macros.cfg]\n</code></pre> <p>Add <code>3ms/macros.cfg</code> to your <code>[dynamicmacros]</code> config section. Example:</p> BeforeAfter <pre><code>[dynamicmacros]\nconfigs: macros.cfg,othermacros.cfg\n</code></pre> <pre><code>[dynamicmacros]\nconfigs: macros.cfg,othermacros.cfg,3ms/macros.cfg\n</code></pre>"},{"location":"configuration/install/#moonraker-update-manager","title":"Moonraker Update Manager","text":"<p>To enable updates for the 3MS, add the following to your <code>moonraker.conf</code> (in the same folder as your <code>printer.cfg</code>):</p> moonraker.conf<pre><code># 3MS Update Manager\n[update_manager mmms]\ntype: git_repo\npath: ~/3MS\norigin: https://github.com/3DCoded/3MS.git\nprimary_branch: main\nis_system_service: False\ninstall_script: install.sh\n</code></pre> <p>Warning</p> <p>When updating via Moonraker, the following files will be overwritten:</p> <ul> <li><code>macros.cfg</code></li> <li><code>KlipperScreen.conf</code></li> <li><code>endless/macros.cfg</code></li> </ul> <p>If you have any changes in these files, they will be lost when updating.</p>"},{"location":"configuration/install/#controller","title":"Controller","text":"<p>In <code>3ms/main.cfg</code>, edit the <code>[include ./controllers/xxx/steppers.cfg]</code> line, replacing <code>xxx</code> with the config name of your controller:</p> Controller Name Config Name SKR Mini E3 V2 <code>btt_skr_mini_e3_v2</code> SKR Pico <code>btt_skr_pico</code> BTT MMB <code>btt_mmb</code> BTT Octopus (main MCU) <code>btt_octopus_main</code> Zonestar ZM384 (main MCU) <code>zonestar_zm384_main</code> Mini RAMBo <code>mini_rambo</code> Geetech A30T <code>gtm32_103_v1</code>"},{"location":"configuration/install/#configure-mcu-id","title":"Configure MCU ID","text":"<p>Finally, to configure the MCU ID you saved from Firmware, run in your terminal:</p> SSH<pre><code>cd ~ &amp;&amp; cat mcu.txt\n</code></pre> <p>Copy the path that is output. Now, in your <code>3ms/controllers/xxx/steppers.cfg</code>, in the <code>[mcu 3ms]</code> section (towards the bottom), set the MCU ID.</p> <p>Example:</p> BeforeAfter 3ms/controllers/xxx/steppers.cfg<pre><code>[mcu 3ms]\nserial: /dev/serial/by-id/&lt;your-mcu-id&gt;\n</code></pre> 3ms/controllers/xxx/steppers.cfg<pre><code>[mcu 3ms]\nserial: /dev/serial/by-id/usb-Klipper_stm32f103xe_33FFD1054746333809650557-if00\n</code></pre>"},{"location":"configuration/macros/","title":"Macros","text":""},{"location":"configuration/macros/#3ms-settings","title":"3MS Settings","text":""},{"location":"configuration/macros/#mmms_settings","title":"MMMS_SETTINGS","text":"<p>Stores the settings for the 3MS.</p> <p>Default Settings</p> <pre><code>variable_load_distance: 210\nvariable_unload_distance: 200\nvariable_load_speed: 4500\nvairable_unload_speed: 4500\nvariable_fsensor_delay: 2000\nvariable_num_tools: 2\nvariable_step_size: 99\nvariable_retry_dist: 50\nvariable_retry_speed: 900\n</code></pre> <p>Example Usage</p> <pre><code>MMMS_SETTINGS\n</code></pre>"},{"location":"configuration/macros/#set_3ms_settings","title":"SET_3MS_SETTINGS","text":"<p>Sets the configuration for the 3MS. Allows temporary customization of load and unload distances and speeds</p> <p>Example Usage</p> <pre><code>SET_3MS_SETTINGS LOAD_DISTANCE=210 UNLOAD_DISTANCE=200 LOAD_SPEED=3500 UNLOAD_SPEED=5500 FSENSOR_DELAY=2500\n</code></pre>"},{"location":"configuration/macros/#get_3ms_settings","title":"GET_3MS_SETTINGS","text":"<p>Displays the configuration for the 3MS. </p> <p>Example Usage <pre><code>GET_3MS_SETTINGS\n</code></pre></p>"},{"location":"configuration/macros/#filament-handling","title":"Filament Handling","text":""},{"location":"configuration/macros/#mmms_unload","title":"MMMS_UNLOAD","text":"<p>Unloads filament by a specified distance and speed. If no distance/speed is specified, it uses the default unload distance/speed from <code>MMMS_SETTINGS</code>.</p> <p>Example Usage</p> <pre><code>MMMS_UNLOAD DISTANCE=200 SPEED=5500\n</code></pre>"},{"location":"configuration/macros/#mmms_load","title":"MMMS_LOAD","text":"<p>Loads filament by a specified distance and speed. If no distance/speed is specified, it uses the default load distance/speed from <code>MMMS_SETTINGS</code>.</p> <p>Example Usage</p> <pre><code>MMMS_LOAD DISTANCE=210 SPEED=3500\n</code></pre>"},{"location":"configuration/macros/#check_fsensor","title":"CHECK_FSENSOR","text":"<p>Checks the filament sensor state. Pauses the print if the sensor state does not match the expected value.</p> <p>Example Usage</p> <pre><code>CHECK_FSENSOR V=1\n</code></pre>"},{"location":"configuration/macros/#tool-sync","title":"Tool Sync","text":""},{"location":"configuration/macros/#set_tool_sync","title":"SET_TOOL_SYNC","text":"<p>Sets the sync state of a tool. Syncs or desyncs the specified tool to/from the extruder.</p> <p>Example Usage</p> <pre><code>SET_TOOL_SYNC TOOL=0 SYNC=1\n</code></pre>"},{"location":"configuration/macros/#sync_tool","title":"SYNC_TOOL","text":"<p>Syncs the specified tool and desyncs all other tools to/from the extruder.</p> <p>Example Usage</p> <pre><code>SYNC_TOOL TOOL=0\n</code></pre>"},{"location":"configuration/macros/#desync_tool","title":"DESYNC_TOOL","text":"<p>Desyncs the specified tool from the extruder.</p> <p>Example Usage</p> <pre><code>DESYNC_TOOL TOOL=0\n</code></pre>"},{"location":"configuration/macros/#clear_tool","title":"CLEAR_TOOL","text":"<p>Clears the current tool selection by setting it to -1.</p> <p>Example Usage</p> <pre><code>CLEAR_TOOL\n</code></pre>"},{"location":"configuration/macros/#desync_all_tools","title":"DESYNC_ALL_TOOLS","text":"<p>Desyncs all configured tools.</p> <p>Example Usage</p> <pre><code>DESYNC_ALL_TOOLS\n</code></pre>"},{"location":"configuration/macros/#print-start-and-end","title":"Print Start and End","text":""},{"location":"configuration/macros/#mmms_start","title":"MMMS_START","text":"<p>Starts the print by checking the filament sensor. If filament is detected, the print is paused and the user is notified. Regardless of the filament sensor state, the initial tool is loaded.</p> <p>Example Usage</p> <pre><code>MMMS_START INITIAL_TOOL=0\n</code></pre>"},{"location":"configuration/macros/#mmms_end","title":"MMMS_END","text":"<p>Ends the print by unloading the current tool. If filament is detected after unloading, the user is notified.</p> <p>Example Usage</p> <pre><code>MMMS_END\n</code></pre>"},{"location":"configuration/macros/#tool-change","title":"Tool Change","text":""},{"location":"configuration/macros/#t0","title":"T0","text":"<p>Changes to tool 0.</p> <p>Example Usage</p> <pre><code>T0\n</code></pre>"},{"location":"configuration/macros/#t1","title":"T1","text":"<p>Changes to tool 1.</p> <p>Example Usage</p> <pre><code>T1\n</code></pre>"},{"location":"configuration/macros/#tx","title":"Tx","text":"<p>Changes to a specified tool. Replace <code>x</code> with the tool number.</p> <p>Example Usage</p> <pre><code>T2\nT3\n</code></pre>"},{"location":"configuration/steppers/","title":"Steppers","text":""},{"location":"configuration/steppers/#stepper-motors","title":"Stepper Motors","text":"<p>Follow this guide to calibrate each of the stepper motors. Each of these steps should be repeated for each of your filament units, replacing <code>TOOL=0</code> with <code>TOOL=1</code>, and so on. Also replacing <code>3ms0</code> with <code>3ms1</code>, and so on.</p> <p>Info</p> <p>If your stepper motor shakes erratically while running any of these commands, your wiring may be incorrect.</p>"},{"location":"configuration/steppers/#is-the-motor-spinning","title":"Is the motor spinning?","text":"<p>Run this command:</p> <pre><code>SYNC_TOOL TOOL=0\nG1 E50 F4500\n</code></pre> <p>If the motor spins, skip to the next step. If not, check your wiring first. If your wiring is fine, go to <code>3ms/steppers.cfg</code>. Locate the section named <code>[extruder_stepper 3ms0]</code>. In front of the <code>enable_pin</code>, add, an <code>!</code>. If there already is one, remove it. Example:</p> BeforeAfter 3ms/steppers.cfg<pre><code>enable_pin: !3ms: PD7\n</code></pre> 3ms/steppers.cfg<pre><code>enable_pin: 3ms: PD7\n</code></pre>"},{"location":"configuration/steppers/#is-the-motor-spinning-backwards","title":"Is the motor spinning backwards?","text":"<p>Preload each of the filament units with a piece of scrap filament by pushing the lever to release the tension, inserting filament, then releasing the lever to restore tension. Next, run this command:</p> <pre><code>SYNC_TOOL TOOL=0\nG1 E50 F4500\n</code></pre> <p>Note which way the filament moves. If it moves forwards, away from the PTFE coupler, skip to the last step. If it moves backwards, you have two choices:</p> <ul> <li>Switch the motor's wires</li> <li>Invert the pin in the configuration</li> </ul> <p>To invert the pin in the configuration, locate the configuration section for the filament unit spinning backwards, and invert the <code>dir_pin</code>. See the previous section for how to invert the pin.</p>"},{"location":"configuration/steppers/#how-far-does-the-filament-move","title":"How far does the filament move?","text":"<p>This section is a modified version of the Klipper Docs</p> <p>Preload each of the filament units with a piece of scrap filament at least 200mm long by pushing the lever to release the tension, inserting filament, then releasing the lever to restore tension.</p> <p>Use a ruler and a marker to place a mark 70mm from the inlet of the filament unit. Use calipers to measure the actual distance. Write it down, as it will be referred to as <code>&lt;initial_mark_distance&gt;</code>.</p> <p>Next, run this command:</p> <pre><code>SYNC_TOOL TOOL=0\nG1 E50 F1500\n</code></pre> <p>Use calipers to measure the new distance between the inlet of the filament unit and the mark. Write it down, as it will be referred to as <code>&lt;next_mark_distance&gt;</code>. </p> <p>Calculate <code>&lt;actual_extrude_distance&gt; = &lt;initial_mark_distance&gt; - &lt;next_mark_distance&gt;</code></p> <p>In the <code>steppers.cfg</code> file (located in <code>3ms/controllers/xxx/steppers.cfg</code>), locate the configuration section for the current extruder. Example:</p> 3ms/controllers/btt_skr_mini_e3_v2/steppers.cfg<pre><code>[extruder_stepper 3ms0]\nextruder: extruder\nstep_pin: 3ms: PB13\ndir_pin: !3ms: PB12\nenable_pin: !3ms: PB14\nmicrosteps: 16\nrotation_distance: 32.8450\n</code></pre> <p>Note the <code>rotation_distance</code> (last line). In this case, it is <code>32.8450</code>.</p> <p>Calculate the new rotation distance: <code>new_rotation_distance = &lt;rotation_distance&gt; * &lt;actual_extrude_distance&gt; / 50</code>. </p> <p>Round this result to three or four decimal places. Decrease it by 0.005 (this is so that if this result is slightly off, the 3MS filament unit will skip, instead of the printer's extruder stripping the filament during a print). </p> <p>Set the new <code>rotation_distance</code> in your config. Save it and restart Klipper.</p> <p>Info</p> <p>If you use the same stepper motor brand and model for each of your filament units, you likely only have to do this step for one stepper, then copy over the rotation_distance to all the others.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>If you want to contribute to the 3MS project, follow the instructions below.</p>"},{"location":"contributing/#development-setup","title":"Development Setup","text":"<p>Follow Development Setup to setup your system for development with the 3MS.</p>"},{"location":"contributing/#controllers","title":"Controllers","text":"<p>If your contribution adds support for another controller type, see Controller Support.</p>"},{"location":"contributing/#pull-request","title":"Pull Request","text":"<p>Finally, submit a pull request. A developer will get back to you soon with feedback, before merging your pull request into the main project.</p> <p>Thank you for your contribution to the 3MS project!</p>"},{"location":"contributing/devsetup/","title":"Development Setup","text":"<p>Follow this guide to setup your system for development with the 3MS. </p>"},{"location":"contributing/devsetup/#configuration-changes","title":"Configuration Changes","text":"<ol> <li>Fork the 3MS repository</li> <li>Create a new branch for your pull request (from the <code>main</code> branch)</li> <li>Develop changes in the new branch</li> </ol>"},{"location":"contributing/devsetup/#documentation-changes","title":"Documentation Changes","text":"<ol> <li>Fork the 3MS repository</li> <li>Create a new branch for your pull request (from the <code>docs</code> branch)</li> <li>Install Python.</li> <li>Install Pipenv.</li> <li>In your terminal, navigate to the 3MS folder, and run:     <pre><code>pipenv install\npipenv shell\n</code></pre></li> <li>Develop changes in the new branch, using the following command to run the documentation locally:     <pre><code>mkdocs serve\n</code></pre></li> </ol>"},{"location":"contributing/supportcontrollers/","title":"Controller Support","text":"<p>Follow this guide to add support for a new 3MS controller.</p>"},{"location":"contributing/supportcontrollers/#requirements","title":"Requirements","text":"<p>To add support for a new 3MS controller, the following requirements must be met:</p> <ul> <li>Klipper natively supports the controller</li> <li>There is an official Klipper configuration for the controller</li> </ul>"},{"location":"contributing/supportcontrollers/#request-a-new-controller","title":"Request a new Controller","text":"<p>If you don't want to create the new controller configuration yourself, you can submit a Controller Request.</p>"},{"location":"contributing/supportcontrollers/#supporting-a-new-controller","title":"Supporting a new Controller","text":"<p>If the controller meets the aforementioned requirements, you can proceed with adding support for it.</p> <p>The following example will be for a SKR Mini E3 V2.0 controller.</p>"},{"location":"contributing/supportcontrollers/#removing-extra-config-sections","title":"Removing Extra Config Sections","text":"<p>First, remove any section of the original configuration that isn't a stepper motor configuration, or a TMCxxxx section. If the controller is a main MCU, remove the <code>[mcu]</code> section too. In both cases, the <code>[extruder]</code> section is kept. Keep any <code>[static_digital_output]</code> or <code>[board_pins]</code> sections. If there are any <code>[board_pins]</code> sections, add the <code>mcu: 3ms</code> line to its configuration.</p> BeforeAfter <pre><code># This file contains common pin mappings for the BIGTREETECH SKR mini\n# E3 v2.0. To use this config, the firmware should be compiled for the\n# STM32F103 with a \"28KiB bootloader\" and USB communication. Also,\n# select \"Enable extra low-level configuration options\" and configure\n# \"GPIO pins to set at micro-controller startup\" to \"!PA14\".\n\n# The \"make flash\" command does not work on the SKR mini E3. Instead,\n# after running \"make\", copy the generated \"out/klipper.bin\" file to a\n# file named \"firmware.bin\" on an SD card and then restart the SKR\n# mini E3 with that SD card.\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: PB13\ndir_pin: !PB12\nenable_pin: !PB14\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC0\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: PB10\ndir_pin: !PB2\nenable_pin: !PB11\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC1\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: PB0\ndir_pin: PC5\nenable_pin: !PB1\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^PC2\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: PB3\ndir_pin: !PB4\nenable_pin: !PD2\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: PC8\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: PA0\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[heater_bed]\nheater_pin: PC9\nsensor_type: ATC Semitec 104GT-2\nsensor_pin: PC3\ncontrol: pid\npid_Kp: 54.027\npid_Ki: 0.770\npid_Kd: 948.182\nmin_temp: 0\nmax_temp: 130\n\n[heater_fan heatbreak_cooling_fan]\npin: PC7\n\n[fan]\npin: PC6\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[printer]\nkinematics: cartesian\nmax_velocity: 300\nmax_accel: 3000\nmax_z_velocity: 5\nmax_z_accel: 100\n\n[static_digital_output usb_pullup_enable]\npins: !PA14\n\n[board_pins]\naliases:\n    # EXP1 header\n    EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=&lt;GND&gt;,\n    EXP1_2=PA15, EXP1_4=&lt;RST&gt;, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=&lt;5V&gt;\n\n# See the sample-lcd.cfg file for definitions of common LCD displays.\n</code></pre> <pre><code># This file contains common pin mappings for the BIGTREETECH SKR mini\n# E3 v2.0. To use this config, the firmware should be compiled for the\n# STM32F103 with a \"28KiB bootloader\" and USB communication. Also,\n# select \"Enable extra low-level configuration options\" and configure\n# \"GPIO pins to set at micro-controller startup\" to \"!PA14\".\n\n# The \"make flash\" command does not work on the SKR mini E3. Instead,\n# after running \"make\", copy the generated \"out/klipper.bin\" file to a\n# file named \"firmware.bin\" on an SD card and then restart the SKR\n# mini E3 with that SD card.\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: PB13\ndir_pin: !PB12\nenable_pin: !PB14\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC0\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: PB10\ndir_pin: !PB2\nenable_pin: !PB11\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC1\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: PB0\ndir_pin: PC5\nenable_pin: !PB1\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^PC2\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: PB3\ndir_pin: !PB4\nenable_pin: !PD2\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: PC8\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: PA0\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[static_digital_output usb_pullup_enable]\npins: !PA14\n\n[board_pins]\nmcu: 3ms\naliases:\n    # EXP1 header\n    EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=&lt;GND&gt;,\n    EXP1_2=PA15, EXP1_4=&lt;RST&gt;, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=&lt;5V&gt;\n</code></pre>"},{"location":"contributing/supportcontrollers/#stepper-configuration","title":"Stepper Configuration","text":"<p>Next, change any <code>stepper_</code> or <code>extruder</code> sections to <code>extruder_stepper_</code> sections. Rename the steppers from <code>x</code>, <code>y</code>, <code>z</code>, and <code>extruder</code> to <code>3ms0</code>, <code>3ms1</code>, <code>3ms2</code>, <code>3ms3</code>, etc. Remove the heater configuration from the <code>[extruder]</code> section. Also, update any <code>[tmcxxxx]</code> to reflect the new stepper names.</p> BeforeAfter <pre><code># This file contains common pin mappings for the BIGTREETECH SKR mini\n# E3 v2.0. To use this config, the firmware should be compiled for the\n# STM32F103 with a \"28KiB bootloader\" and USB communication. Also,\n# select \"Enable extra low-level configuration options\" and configure\n# \"GPIO pins to set at micro-controller startup\" to \"!PA14\".\n\n# The \"make flash\" command does not work on the SKR mini E3. Instead,\n# after running \"make\", copy the generated \"out/klipper.bin\" file to a\n# file named \"firmware.bin\" on an SD card and then restart the SKR\n# mini E3 with that SD card.\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[stepper_x]\nstep_pin: PB13\ndir_pin: !PB12\nenable_pin: !PB14\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC0\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_x]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_y]\nstep_pin: PB10\ndir_pin: !PB2\nenable_pin: !PB11\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC1\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 stepper_y]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[stepper_z]\nstep_pin: PB0\ndir_pin: PC5\nenable_pin: !PB1\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^PC2\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 stepper_z]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder]\nstep_pin: PB3\ndir_pin: !PB4\nenable_pin: !PD2\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\nheater_pin: PC8\nsensor_type: EPCOS 100K B57560G104F\nsensor_pin: PA0\ncontrol: pid\npid_Kp: 21.527\npid_Ki: 1.063\npid_Kd: 108.982\nmin_temp: 0\nmax_temp: 250\n\n[tmc2209 extruder]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[static_digital_output usb_pullup_enable]\npins: !PA14\n\n[board_pins]\nmcu: 3ms\naliases:\n    # EXP1 header\n    EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=&lt;GND&gt;,\n    EXP1_2=PA15, EXP1_4=&lt;RST&gt;, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=&lt;5V&gt;\n</code></pre> <pre><code># This file contains common pin mappings for the BIGTREETECH SKR mini\n# E3 v2.0. To use this config, the firmware should be compiled for the\n# STM32F103 with a \"28KiB bootloader\" and USB communication. Also,\n# select \"Enable extra low-level configuration options\" and configure\n# \"GPIO pins to set at micro-controller startup\" to \"!PA14\".\n\n# The \"make flash\" command does not work on the SKR mini E3. Instead,\n# after running \"make\", copy the generated \"out/klipper.bin\" file to a\n# file named \"firmware.bin\" on an SD card and then restart the SKR\n# mini E3 with that SD card.\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[extruder_stepper 3ms0]\nstep_pin: PB13\ndir_pin: !PB12\nenable_pin: !PB14\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC0\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 extruder_stepper 3ms0]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms1]\nstep_pin: PB10\ndir_pin: !PB2\nenable_pin: !PB11\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC1\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 extruder_stepper 3ms1]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms2]\nstep_pin: PB0\ndir_pin: PC5\nenable_pin: !PB1\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^PC2\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 extruder_stepper 3ms2]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms3]\nstep_pin: PB3\ndir_pin: !PB4\nenable_pin: !PD2\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\n\n[tmc2209 extruder_stepper 3ms3]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[static_digital_output usb_pullup_enable]\npins: !PA14\n\n[board_pins]\nmcu: 3ms\naliases:\n    # EXP1 header\n    EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=&lt;GND&gt;,\n    EXP1_2=PA15, EXP1_4=&lt;RST&gt;, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=&lt;5V&gt;\n</code></pre>"},{"location":"contributing/supportcontrollers/#final-important-details","title":"Final Important Details","text":"<p>Change the <code>[mcu]</code> section (if present) to <code>[mcu 3ms]</code>. Add a <code>3ms:</code> prefix to all pin names (if not a main MCU config). Any <code>!</code> or <code>^</code> should go before the <code>3ms:</code> prefix. Remove the <code>filament_diameter</code> and <code>nozzle_diameter</code> options from the former <code>[extruder]</code> section. Remove all homing/endstop-related sections from the stepper configurations. Append a <code>extruder: extruder</code> option to all <code>[extruder_stepper]</code> sections.</p> BeforeAfter <pre><code># This file contains common pin mappings for the BIGTREETECH SKR mini\n# E3 v2.0. To use this config, the firmware should be compiled for the\n# STM32F103 with a \"28KiB bootloader\" and USB communication. Also,\n# select \"Enable extra low-level configuration options\" and configure\n# \"GPIO pins to set at micro-controller startup\" to \"!PA14\".\n\n# The \"make flash\" command does not work on the SKR mini E3. Instead,\n# after running \"make\", copy the generated \"out/klipper.bin\" file to a\n# file named \"firmware.bin\" on an SD card and then restart the SKR\n# mini E3 with that SD card.\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[extruder_stepper 3ms0]\nstep_pin: PB13\ndir_pin: !PB12\nenable_pin: !PB14\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC0\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 extruder_stepper 3ms0]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms1]\nstep_pin: PB10\ndir_pin: !PB2\nenable_pin: !PB11\nmicrosteps: 16\nrotation_distance: 40\nendstop_pin: ^PC1\nposition_endstop: 0\nposition_max: 235\nhoming_speed: 50\n\n[tmc2209 extruder_stepper 3ms1]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms2]\nstep_pin: PB0\ndir_pin: PC5\nenable_pin: !PB1\nmicrosteps: 16\nrotation_distance: 8\nendstop_pin: ^PC2\nposition_endstop: 0.0\nposition_max: 250\n\n[tmc2209 extruder_stepper 3ms2]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms3]\nstep_pin: PB3\ndir_pin: !PB4\nenable_pin: !PD2\nmicrosteps: 16\nrotation_distance: 33.500\nnozzle_diameter: 0.400\nfilament_diameter: 1.750\n\n[tmc2209 extruder_stepper 3ms3]\nuart_pin: PC11\ntx_pin: PC10\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[static_digital_output usb_pullup_enable]\npins: !PA14\n\n[board_pins]\nmcu: 3ms\naliases:\n    # EXP1 header\n    EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=&lt;GND&gt;,\n    EXP1_2=PA15, EXP1_4=&lt;RST&gt;, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=&lt;5V&gt;\n</code></pre> <pre><code># This file contains common pin mappings for the BIGTREETECH SKR mini\n# E3 v2.0. To use this config, the firmware should be compiled for the\n# STM32F103 with a \"28KiB bootloader\" and USB communication. Also,\n# select \"Enable extra low-level configuration options\" and configure\n# \"GPIO pins to set at micro-controller startup\" to \"!PA14\".\n\n# The \"make flash\" command does not work on the SKR mini E3. Instead,\n# after running \"make\", copy the generated \"out/klipper.bin\" file to a\n# file named \"firmware.bin\" on an SD card and then restart the SKR\n# mini E3 with that SD card.\n\n# See docs/Config_Reference.md for a description of parameters.\n\n[extruder_stepper 3ms0]\nextruder: extruder\nstep_pin: 3ms: PB13\ndir_pin: !3ms: PB12\nenable_pin: !3ms: PB14\nmicrosteps: 16\nrotation_distance: 40\n\n[tmc2209 extruder_stepper 3ms0]\nuart_pin: 3ms: PC11\ntx_pin: 3ms: PC10\nuart_address: 0\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms1]\nextruder: extruder\nstep_pin: 3ms: PB10\ndir_pin: !3ms: PB2\nenable_pin: !3ms: PB11\nmicrosteps: 16\nrotation_distance: 40\n\n[tmc2209 extruder_stepper 3ms1]\nuart_pin: 3ms: PC11\ntx_pin: 3ms: PC10\nuart_address: 2\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms2]\nextruder: extruder\nstep_pin: 3ms: PB0\ndir_pin: 3ms: PC5\nenable_pin: !3ms: PB1\nmicrosteps: 16\nrotation_distance: 8\n\n[tmc2209 extruder_stepper 3ms2]\nuart_pin: 3ms: PC11\ntx_pin: 3ms: PC10\nuart_address: 1\nrun_current: 0.580\nstealthchop_threshold: 999999\n\n[extruder_stepper 3ms3]\nextruder: extruder\nstep_pin: 3ms: PB3\ndir_pin: !3ms: PB4\nenable_pin: !3ms: PD2\nmicrosteps: 16\nrotation_distance: 33.500\n\n[tmc2209 extruder_stepper 3ms3]\nuart_pin: 3ms: PC11\ntx_pin: 3ms: PC10\nuart_address: 3\nrun_current: 0.650\nstealthchop_threshold: 999999\n\n[mcu]\nserial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00\n\n[static_digital_output usb_pullup_enable]\npins: !PA14\n\n[board_pins]\nmcu: 3ms\naliases:\n    # EXP1 header\n    EXP1_1=PB5,  EXP1_3=PA9,   EXP1_5=PA10, EXP1_7=PB8,  EXP1_9=&lt;GND&gt;,\n    EXP1_2=PA15, EXP1_4=&lt;RST&gt;, EXP1_6=PB9,  EXP1_8=PB15, EXP1_10=&lt;5V&gt;\n</code></pre>"},{"location":"experimental/dualdrivetpu/","title":"Dual Drive 3MS Extruders for TPU","text":"<p>The 3MS's existing single-drive extruders are prone to tangling with TPU during toolchanges. Dual drive 3MS extruders may fix this issue and allow for multimaterial printing with TPU.</p> <p>Info</p> <p>This page, and the features mentioned on it, are in development</p> <p>The extruder used in this modification can be found on Amazon here.</p>"},{"location":"experimental/dualdrivetpu/#benefits","title":"Benefits","text":"<p>Current testing shows the following benefits:</p> <ul> <li> Increased reliability with rigid filaments</li> <li> Easier initial filament loading</li> <li> Less filament grinding</li> </ul>"},{"location":"experimental/dualdrivetpu/#tpu-testing","title":"TPU Testing","text":"<p>Current testing with TPU (a check indicates it works):</p> <ul> <li> Single material TPU prints loaded via the 3MS</li> <li> Multimaterial TPU prints</li> </ul>"},{"location":"experimental/speedlimit/","title":"Speed Limiting for TPU","text":"<p>TPU filament has a tendency to buckle when extruded at high speeds. This feature attempts to slow down the 3MS extruders during toolchanges only when TPU is involved in the toolchange.</p> <p>Info</p> <p>This page, and the features mentioned on it, are in development</p>"},{"location":"experimental/speedlimit/#installation","title":"Installation","text":"<p>To install the speed limiting feature, run in your terminal:</p> <pre><code>cd ~/3MS\ngit fetch\ngit checkout \ngit pull limited-speed\nsh install.sh\n</code></pre> <p>Restart Klipper.</p>"},{"location":"experimental/speedlimit/#configuration","title":"Configuration","text":"<p>Update your <code>3ms/main.cfg</code>:</p> 3ms/main.cfg<pre><code>[save_variables]\nfilename: ~/printer_data/config/3ms/variables.cfg\n\n[include ./settings.cfg]\n[include ./controllers/btt_skr_mini_e3_v2/steppers.cfg]\n\n[dynamicmacros 3ms]\nconfigs: 3ms/macros.cfg, 3ms/speedlimit.cfg\n</code></pre>"},{"location":"experimental/speedlimit/#usage","title":"Usage","text":"<p>Info</p> <p>This section is under construction</p>"},{"location":"guides/3dchameleon/","title":"3DChameleon to 3MS Conversion","text":"<p>Follow this guide to convert a 3DChameleon to a 3MS.</p>"},{"location":"guides/3dchameleon/#bom","title":"BOM","text":"Name Price Quantity Link Notes SKR Mini E3 V2 $34.99 1 Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters MK8 Metal Extruder 2 $9.99 Amazon Alternatively, you can use this Dual-drive MK8 based extruder <p>The final cost of this upgrade is around $70.</p>"},{"location":"guides/3dchameleon/#instructions","title":"Instructions","text":"<ol> <li>Release the eight bolts on the 3DChameleon unit to remove the two NEMA17 stepper motors.</li> <li>Unplug the NEMA17's from the 3DChameleon electronics board</li> <li>Remove the PTFE tubes from the 3DChameleon unit and the Y-splitter</li> </ol> <p>Next, follow the Master Instructions except for the BOM section.</p>"},{"location":"guides/bypass/","title":"3MS Bypass","text":"<p>Follow this guide to allow manually loading a spool to your printer, and bypassing the 3MS system.</p>"},{"location":"guides/bypass/#klipper-macros","title":"Klipper Macros","text":"<p>Replace the <code>MMMS_START</code> line in your <code>PRINT_START</code> macro with:</p> <pre><code>{% if (params.BYPASS|default(0)|int) %}\n    DESYNC_ALL_TOOLS\n{% else %}\n    # You can also put your ENDLESS_START line here too\n    MMMS_START INITIAL_TOOL={params.INITIAL_EXTRUDER}\n{% endif %}\n</code></pre> <p>Replace the <code>MMMS_END</code> line in your <code>PRINT_END</code> macro with:</p> <pre><code>{% if not (params.BYPASS|default(0)|int) %}\n    MMMS_END\n{% endif %}\n</code></pre>"},{"location":"guides/bypass/#slicer-gcode","title":"Slicer GCode","text":"<ol> <li>Navigate to <code>Printer Settings</code> -&gt; <code>Machine G-code</code>. </li> <li>In your <code>Machine start G-code</code>, pass the <code>BYPASS=1</code> parameter to your <code>PRINT_START</code> macro. </li> <li>In your <code>Machine end G-code</code>, pass the <code>BYPASS=1</code> parameter to your <code>PRINT_END</code> macro.</li> <li>Save the new preset with a different name to differentiate it from your main preset.</li> </ol>"},{"location":"guides/endless/","title":"Endless Spool","text":"<p>This feature is based off of Happy Hare firmware.</p>"},{"location":"guides/endless/#requirements","title":"Requirements","text":"<p>To use endless spool, your printer must have one of the following:</p> <ul> <li> <p>A filament sensor before your printer's extruder</p> <p>Recommended</p> </li> </ul> <p>OR</p> <ul> <li> <p>A filament sensor before each of the 3MS's extruders</p> <p>Untested and deprecated</p> </li> </ul> <p>The endless spool feature (currently) also only works when printing single-color models.</p>"},{"location":"guides/endless/#install","title":"Install","text":"<p>To install the endlss spool, update your <code>3ms/main.cfg</code>:</p> 3ms/main.cfg<pre><code>[save_variables]\nfilename: ~/printer_data/config/3ms/variables.cfg\n\n[include ./settings.cfg]\n[include ./endless/settings.cfg]\n[include ./controllers/btt_skr_mini_e3_v2/steppers.cfg]\n\n[dynamicmacros 3ms]\nconfigs: 3ms/macros.cfg, 3ms/endless/macros.cfg\n</code></pre>"},{"location":"guides/endless/#usage","title":"Usage","text":"<p>To setup endless spool, first choose which filaments can be used as backups for each other. Example with three tools:</p> <ul> <li>T0 (PLA) -&gt; T1(PLA)</li> <li>T1(PLA) -&gt; T0(PLA)</li> <li>T2 (PETG) -&gt; PAUSE</li> </ul> <p>In this case, since T0 and T1 are backups for each other, they can be considered in the same \"group\" and assigned a group number. In this case, <code>1</code> will be used. Since T2 doesn't have a backup, it will be its own group. In this case, <code>2</code> will be used.</p> <p>If your printer has a filament sensor before each of the 3MS's filament units, set the <code>single</code> setting to <code>0</code>. If your printer has only one filament sensor before its main extruder, set the <code>single</code> setting to <code>1</code>.</p> <p>Edit your <code>3ms/endless/settings.cfg</code>:</p> 3ms/endless/settings.cfg<pre><code>[gcode_macro ENDLESS_SETTINGS]\nsingle: 1 # &lt;-- Set to 0 if you have a filament sensor before each of your 3MS extruders. Set to 1 if you have one filament sensor right before your printer's extruder.\nvariable_t0: 1\nvariable_t1: 1\n### --- Uncomment below for more than two tools --- ###\nvariable_t2: 2\n# variable_t3: -1\ngcode:\n    RESPOND MSG=\"\"\n</code></pre>"},{"location":"guides/endless/#filament-sensors","title":"Filament Sensors","text":"<p>If you have multiple filament sensors, change your filament sensors' <code>runout_gcode</code> to:</p> <pre><code>ENDLESS_RUNOUT T=0\n</code></pre> <p>For the filament sensor associated with T1, change the code from <code>T=0</code> to <code>T=1</code>, and so on.</p> <p>If you have one filament sensor, change your filament sensor's <code>runout_gcode</code> to:</p> <pre><code>ENDLESS_RUNOUT\n</code></pre>"},{"location":"guides/endless/#custom-gcode","title":"Custom GCode","text":"<p>To define custom filament runout functionality, you can define the <code>FILAMENT_RUNOUT</code> macro. Example:</p> <pre><code>[gcode_macro FILAMENT_RUNOUT]\ngcode:\n    RESPOND MSG=\"Filament runout T{params.T}!!!\"\n</code></pre>"},{"location":"guides/endless/#gcodes","title":"GCodes","text":"<p>To edit the Endless Spool state mid-print, run the <code>SET_ENDLESS_SETTINGS</code> command. Examples:</p> <pre><code>; Set T0 and T1 as backups for each other, and T2 as standalone\nSET_ENDLESS_SETTINGS T0=1 T1=1 T2=2\n\n; Set T0 as standalone, and T1 and T2 as backups for each other\nSET_ENDLESS_SETTINGS T0=-1 T1=1 T2=1\n\n; Disable endless spool\nSET_ENDLESS_SETTINGS ENABLED=0\n\n; Enable endless spool\nSET_ENDLESS_SETTINGS ENABLED=1\n</code></pre> <p>To view the Endless Spool settings, run the <code>GET_ENDLESS_SETTINGS</code> command.</p>"},{"location":"guides/endless/#print_start","title":"PRINT_START","text":"<p>In your slicer's print start GCode, add the following parameter to your <code>PRINT_START</code> macro:</p> <pre><code>NUM_TOOLCHANGES=[total_toolchanges]\n</code></pre> <p>Next, in your <code>PRINT_START</code> macro, add the following line before your <code>MMMS_START</code> call:</p> <pre><code>ENDLESS_START NUM_TOOLCHANGES={params.NUM_TOOLCHANGES}\n</code></pre> <p>This will ensure that Endless Spool is only enabled for single-color prints.</p>"},{"location":"guides/materials/","title":"Materials","text":"<p>Follow this guide to determine if your filament will work with the 3MS.</p>"},{"location":"guides/materials/#materials-table","title":"Materials Table","text":"<p>This table contains which filaments work in single mode and/or multimaterial mode with the 3MS.</p> Filament Single Mode Multimaterial Mode Notes PLA Yes Yes PLA+ Yes Yes Silk PLA Yes Yes Matte PLA Yes Yes PETG Yes Yes TPU Yes Untested"},{"location":"guides/materials/#pla","title":"PLA(+)","text":"<p>PLA/PLA+/PLA Pro, etc. filaments are very easy to print in multimaterial with the 3MS. They also support the No Tip Shaping feature.</p>"},{"location":"guides/materials/#silkmatte-pla","title":"Silk/Matte PLA","text":"<p>Silk/Matte PLA filaments are slightly more difficult to print with or without the 3MS. They generally require tip shaping to work with the 3MS in multimaterial mode.</p>"},{"location":"guides/materials/#petg","title":"PETG","text":"<p>PETG filaments are easy to print in multimaterial with the 3MS. They will likely require tip shaping. Suggested settings options are provided below. Ideal settings for your setup will likely include a combination of the options.</p> Tip Shaping Option 1Option 2 Setting Name Setting Value Nozzle Temperature 250\u00baC Loading speed at the start 19mm/s Loading speed 14mm/s Unloading speed at start 200mm/s Unloading speed 90mm/s Delay after unloading 4s # Cooling moves 3 Speed of first cooling move 1mm/s Speed of last cooling move 20mm/s Ramming settings Source: Prusa Forums Setting Name Setting Value Nozzle Temperature 250\u00baC Loading speed at the start 15mm/s Loading speed 14mm/s Unloading speed at start 120mm/s Unloading speed 20mm/s Delay after unloading 0s # Cooling moves 1 Speed of first cooling move 1mm/s Speed of last cooling move 15mm/s Ramming settings Source: Prusa Forums"},{"location":"guides/materials/#tpu","title":"TPU","text":"<p>TPU filaments are very difficult to print with or without the 3MS. If your printer can reliably print TPU, you can likely use it with the 3MS in single mode. To use it in multimaterial mode and/or improve reliability, see the experimental Dual Drive 3MS Extruders for TPU feature.</p>"},{"location":"guides/notip/","title":"Toolchanges Without Tip Shaping or Filament Cutter!","text":"<p>Because the 3MS is synchronized to the printer's extruder, it can perform toolchanges without any tip shaping or filament cutter.</p>"},{"location":"guides/notip/#should-tip-shaping-be-used","title":"Should Tip Shaping be Used?","text":"<p>See Materials for information on whether or not tip shaping should be used for your filaments.</p>"},{"location":"guides/notip/#slicer-setup","title":"Slicer Setup","text":"<p>Setup your slicer for no tip shaping as follows.</p>"},{"location":"guides/notip/#disable-filament-ramming","title":"Disable Filament Ramming","text":"<p>Disable filament ramming in <code>Filament Settings</code> -&gt; <code>Multimaterial</code> -&gt; <code>Toolchange parameters with single extruder MM printers</code>:</p> <p> </p>"},{"location":"guides/notip/#unloadload-speed","title":"Unload/Load Speed","text":"<p>Next, change the <code>Unloading speed at start</code> and <code>Unloading speed</code> to 300 (faster is better here). Next, change the <code>Loading speed at start</code> and <code>Loading speed</code> to 300 and 100, respectively.</p> What this does <p>The main idea behind toolchanges without tip shaping relies on the filament being unloaded too fast to form a blob. Setting the <code>Unloading speed</code> settings allows this. Next, loading the filament back can be generally optimized by increasing the <code>Loading speed</code> settings.</p> <p></p>"},{"location":"guides/notip/#temperature","title":"Temperature","text":"<p>If your filament has very long strings on the end of them after unloading without tip shaping (longer than 2cm), decrease your filament temperature. </p> <p>If your filament tip has a nearly flat tip, increase your filament temperature.</p> <p>The ideal filament tip has a pointy end and a small string (less than 5mm). When in doubt, it is recommended to aim for a slightly stringy tip over a flat tip.</p>"},{"location":"guides/tipshaping/","title":"Tip Shaping Guidelines","text":"<p>Follow this guide to get faster and more reliable toolchanges with your 3MS.</p>"},{"location":"guides/tipshaping/#does-my-filament-need-tip-shaping","title":"Does My Filament Need Tip Shaping?","text":"<p>If your filament is in this list, then it likely won't need tip shaping, and you can use the No Tip Shaping feature:</p> <ul> <li>PLA (not Silk, Matte, or glitter variants)</li> <li>PLA+ (including PLA Pro, Tough PLA)</li> <li>PETG</li> </ul> <p>If you filament wasn't in that list, continue reading this page.</p>"},{"location":"guides/tipshaping/#blobby-tips","title":"Blobby Tips","text":"<p>If your filament tip has a thicker tip after unloading, you can do two things:</p> <ol> <li>Print hotter</li> <li>Decrease cooling moves</li> </ol>"},{"location":"guides/tipshaping/#stringy-tips","title":"Stringy Tips","text":"<p>If your filament tip has a stringy tip after unloading, you can do two things:</p> <ol> <li>Print colder</li> <li>Increase cooling moves</li> </ol> <p>You may also be able to use the No Tip Shaping feature.</p>"},{"location":"guides/tipshaping/#hook-of-death","title":"Hook of Death","text":"<p>If you filament tip can't unload out of your extruder and forms a hook shape, you may need to replace the PTFE tube between your printer's extruder and hotend. You may also want to follow the recommendations for Blobby tips.</p>"},{"location":"hidden/hidden-assembly/","title":"Assembly","text":""},{"location":"hidden/hidden-assembly/#step-1-connecting-the-power-cables","title":"Step 1 Connecting the Power Cables","text":"<p>Choose one of the wiring options below.</p> Option 1 (DCIN)Option 2 (POWER) <p></p> <p></p> <p> Attach the positive cable from the PSU to the positive* port on the mainboard</p> <p> Attach the negative cable from the PSU to the negative port on the mainboard</p>"},{"location":"hidden/hidden-assembly/#step-2-connecting-the-stepper-motors","title":"Step 2 Connecting the Stepper Motors","text":"<p> Plug in the stepper for the first 3MS extruder (T0)</p> <p> Plug in the stepper for the second 3MS extruder (T1)</p> <p> If applicable, plug in the stepper for the third 3MS extruder (T2)</p> <p> If applicable, plug in the stepper for the fourth 3MS extruder (T3)</p>"},{"location":"setup/assembly/","title":"Assembly","text":"<p>Follow this guide to assemble your 3MS.</p>"},{"location":"setup/assembly/#printed-parts","title":"Printed Parts","text":"<p>An optional board enclosure for the SKR Mini E3 is available here.</p> <p>Additionally, an optional universal mount for the MK8 extruder using M3 bolts is available here. Note that this requires 2-4 M3 bolts and a place to screw the bolts into.</p> <p>Finally, you will need to print enough of these Y splitters for the filament.</p> <p>The Y-splitter available here is now recommended.</p>"},{"location":"setup/assembly/#mk8-assembly","title":"MK8 Assembly","text":"<p>Next, assemble the MK8 extruders onto the NEMA17 motors using the provided instructions that came with them. If you use the mount provided above, make sure it is in between the MK8 and NEMA17. </p>"},{"location":"setup/assembly/#wiring","title":"Wiring","text":"<p>Note for Certain Printers</p> <p>If your printer has Klipper running internally (not on an external computer), the controller (if not a main MCU config) is plugged into a USB port on the printer itself.</p> <p>Follow one of the following guides based on your controller:</p> <ul> <li>SKR Mini E3 V2</li> <li>SKR Pico</li> <li>BTT MMB</li> <li>BTT Octopus (main MCU)</li> <li>Einsy RAMBo (main MCU) with SKR Mini E3 V2</li> <li>Zonestar ZM384 (main MCU)</li> <li>Mini RAMBo</li> <li>Geetech A30T</li> </ul>"},{"location":"setup/bom/","title":"BOM","text":""},{"location":"setup/bom/#number-of-filament-units","title":"Number of filament units","text":"<p>First, choose the number of filament units you want. Each filament unit lets you print with an additional filament. Two filament units are the minimum. You can add or remove filament units after building, but the BOM and configuration will vary based on how many filament units you want.</p>"},{"location":"setup/bom/#controller-boms","title":"Controller BOMs","text":"<p>Choose the BOM for your chosen controller from the list below:</p> <ul> <li>BTT SKR Mini E3 V2</li> <li>BTT SKR Pico</li> <li>BTT MMB</li> <li>BTT Octopus (main MCU)</li> <li>Zonestar ZM384 (main MCU)</li> <li>Mini RAMBo</li> <li>Geetech A30T</li> </ul>"},{"location":"setup/bom/#filament-unit-boms","title":"Filament Unit BOMs","text":"<p>For each filament unit, purchase this BOM:</p> Name Quantity Price Link Notes NEMA17 Stepper Motor 1 $9.99 Amazon You can use a pancake stepper if you want, but it will have less torque MK8 Metal Extruder 1 $9.99 Amazon Alternatively, you can use this Dual-drive MK8 based extruder Capricorn PTFE Tubing 1 $11.49 Amazon You likely won't need this for every unit, as this is usually too long for only one unit"},{"location":"setup/firmware/","title":"Firmware","text":"<p>Follow this guide to install Klipper firmware onto your 3MS MCU. This guide is a modified version of the Klipper Documentation.</p> <p>Info</p> <p>The following controller(s) can skip this guide:</p> <ul> <li>BTT Octopus (main MCU)</li> <li>Zonestar ZM384 (main MCU)</li> </ul>"},{"location":"setup/firmware/#create-firmwarebin","title":"Create firmware.bin","text":"<p>Make sure your 3MS MCU is plugged into your Klipper Host. Run in your terminal:</p> <pre><code>cd ~/klipper\nmake menuconfig\n</code></pre> <p>In the menuconfig, configure it to your MCU. Instructions are included at the top of <code>3ms/controllers/xxx/steppers.cfg</code>.</p> <p>Geetech A30T</p> <p>If you're using a Geetech A30T controller, follow the flashing instructions here.</p> <p>Run in your terminal:</p> <pre><code>make clean\nmake\n</code></pre> <p>The <code>klipper.bin</code> file, located in <code>~/klipper/out/klipper.bin</code> needs to be copied to a MicroSD card and renamed to <code>firmware.bin</code> (case-sensitive). </p>"},{"location":"setup/firmware/#install-firmwarebin","title":"Install firmware.bin","text":"<p>Next, unplug the 3MS board from the PSU and your Klipper Host and insert the SD Card. Next, plug in the PSU, THEN the Klipper Host to the 3MS board. The firmware is now flashed.</p>"},{"location":"setup/firmware/#get-mcu-id","title":"Get MCU ID","text":"<p>In the terminal, run:</p> <pre><code>ls /dev/serial/by-id/\n</code></pre> <p>Example output:</p> <pre><code>usb-Klipper_stm32f103xe_33FFD1054746333809650557-if00\nusb-Prusa_Research__prusa3d.com__Original_Prusa_i3_MK3_xxx-if00\n</code></pre> <p>In this case, the first line is the 3MS, and the second line is the 3D printer. Now that you know the id of the 3MS MCU, copy it and save it to a file:</p> <pre><code>cd ~ &amp;&amp; echo \"&lt;your-mcu-id&gt;\" &gt;&gt; mcu.txt \n</code></pre>"},{"location":"setup/firstprint/","title":"First Print","text":"<p>Follow this guide to begin your first multimaterial print. There are two main ways to prepare a model for multimaterial painting. </p>"},{"location":"setup/firstprint/#method-1-multimaterial-painting","title":"Method 1: Multimaterial Painting","text":"<p>This method allows you to turn any model, even if it's not designed for multimaterial printing, into a multimaterial print. First, import your model into the slicer. In this case, a 3DBenchy will be used.</p> <p>Cmd+I OR Ctrl+I</p> <p></p> <p>Next, select the model and click multimaterial painting at the top.</p> <p>N</p> <p></p> <p>Once you're in this menu, you can choose any tool, tool size, and filament. Now, just drag over the model to apply the selected tool to the model. In this case, the hull of the 3DBenchy will be set to filament two using the fill tool.</p> <p></p> <p>Finally, hit slice and your model is ready to print!</p> <p>Cmd+R OR Ctrl+R</p> <p></p>"},{"location":"setup/firstprint/#method-2-multimaterial-model","title":"Method 2: Multimaterial Model","text":"<p>This method allows you to turn parts of a model to different materials. For this tutorial, this T-rex by Cipis will be used. First, import your model into the slicer. If prompted while opening to treat the model as multiple parts, select \"Yes\".</p> <p>Cmd+I OR Ctrl+I</p> <p></p> <p>Next, go to object settings and change the different parts of the model to different colors.</p> <p></p> <p>Finally, hit slice and your model is ready to print!</p> <p>Cmd+R OR Ctrl+R</p> <p></p>"},{"location":"setup/firstprint/#wipe-tower-position","title":"Wipe Tower Position","text":"<p>In the examples, you may have noticed that the wipe tower is far from the model. The travel time between the model and wipe tower adds up, and moving the tower closer can help reduce print time.</p> <p>In the \"Prepare\" view, click and drag the wipe tower as close to the object as you can without colliding.</p> <p></p> <p>If you have a camera on your 3D printer, you may want to put the wipe tower \"behind\" the part from your camera's perspective.</p>"},{"location":"setup/k1/","title":"Creality K1 Series","text":"<p>Info</p> <p>This guide applies to the following printers:</p> <ul> <li>Creality K1</li> <li>Creality K1C</li> <li>Creality K1 Max</li> </ul> <p>Warning</p> <p>This guide is still under construction</p> <p>Creality K1 Series 3D printers use a custom version of Klipper, which can cause unexpected problems. Setting up the 3MS (or any Klipper addon) requires extra steps for K1 series printers.</p> <p>Thank you to @pvilbig for their patience with me here while I was figuring out how to adapt the 3MS to K1 series printers.</p>"},{"location":"setup/k1/#configuration-installation","title":"Configuration Installation","text":"<p>To install the 3MS configuration, SSH into your printer and run the following commands:</p> <pre><code>cd ~/\ngit clone -b main --single-branch https://github.com/3DCoded/3MS\ncd 3MS\npython3 install.py --path /usr/data/printer_data/config/3ms\n</code></pre> <p>Edit <code>3ms/main.cfg</code>:</p> <pre><code>[save_variables]\nfilename: /usr/data/variables.cfg\n</code></pre>"},{"location":"setup/k1/#dynamicmacros","title":"DynamicMacros","text":"<p>To install DynamicMacros, SSH into your printer and run the following commands:</p> <pre><code>cd ~/\ngit clone -b main --single-branch https://github.com/3DCoded/DynamicMacros\ncd DynamicMacros\nsh install-k1.sh\n</code></pre>"},{"location":"setup/k1/#klipperscreen","title":"KlipperScreen","text":"<p>To setup KlipperScreen with the 3MS, run the following commands in SSH:</p> <pre><code>git clone https://github.com/3DCoded/KlipperScreen-3MS KlipperScreen\ncd ~/KlipperScreen\n./KlipperScreen/scripts/KlipperScreen-install.sh\n</code></pre>"},{"location":"setup/klipperscreen/","title":"KlipperScreen","text":"<p>Info</p> <p>This feature is still in an alpha state.</p> <p> </p> <p>The 3MS has a custom fork of KlipperScreen you can use to control your 3MS.</p>"},{"location":"setup/klipperscreen/#install","title":"Install","text":"<p>To install the 3MS KlipperScreen, first install KlipperScreen following instructions here. Then, run in your terminal:</p> <pre><code>cd ~\nmv KlipperScreen KlipperScreen.old\ngit clone https://github.com/3DCoded/KlipperScreen-3MS KlipperScreen\ncd ~/KlipperScreen\n./KlipperScreen/scripts/KlipperScreen-install.sh\n</code></pre> <p>Restart KlipperScreen.</p>"},{"location":"setup/slicer/","title":"Slicer Setup","text":"<p>Follow this guide to setup the 3MS with your slicer. OrcaSlicer will be used in this guide, but these same settings (with different names) can be applied to PrusaSlicer and SuperSlicer.</p>"},{"location":"setup/slicer/#number-of-filament-units","title":"Number of Filament Units","text":"<p>Set the number of filaments in your slicer to the number of filament units in your 3MS. </p> <p></p> <p>In OrcaSlicer, press the filament plus button until there are as many filaments displayed as you have filament units.</p>"},{"location":"setup/slicer/#klipper-startend-g-code","title":"Klipper Start/End G-Code","text":"<p>In your Klipper <code>PRINT_START</code> macro, add the following right before your purge line:</p> <pre><code>MMMS_START INITIAL_TOOL={params.INITIAL_EXTRUDER}\n</code></pre> <p>In your <code>PRINT_END</code> macro, add the following before the cooldown command is called:</p> <pre><code>MMMS_END\n</code></pre>"},{"location":"setup/slicer/#slicer-start-g-code","title":"Slicer Start G-Code","text":"<p>In your slicer's Start G-Code, add the following parameter to your <code>PRINT_START</code>:</p> <pre><code>INITIAL_EXTRUDER=[initial_extruder]\n</code></pre> <p></p> <p>Info</p> <p>This is the last required part of slicer setup.</p>"},{"location":"setup/slicer/#optional-klipper_estimator","title":"Optional: klipper_estimator","text":"<p>If you use klipper_estimator and want the toolchange represented in the time estimate, time your toolchange, then change your Change filament G-Code:</p> <p></p>"},{"location":"setup/controllers/","title":"Controllers","text":"<p>Follow this guide to determine which controller to use in your 3MS.</p>"},{"location":"setup/controllers/#options","title":"Options","text":"<p>The 3MS works on multiple different controllers. </p> <p>Info</p> <p>If your printer's mainboard has spare stepper ports, you can use them to control 3MS steppers. You can open an issue on Github (there's a template) to get a configuration made for your specific setup. Any controllers listed with \"(main MCU)\" use those spare stepper plugs.</p> <p>Choose one of the following supported controllers (a checkmark indicates it is fully tested):</p> <ul> <li> <p> SKR Mini E3 V2.0 (4 colors)</p> <p>Fully Tested</p> </li> <li> <p> Einsy RAMBo (main MCU) with SKR Mini E3 V2.0 (3ms MCU)</p> <p>Fully Tested</p> <p>Expert modification</p> </li> <li> <p> SKR Pico (4 colors)</p> <p>Testers Wanted</p> </li> <li> <p> BTT MMB (4 colors)</p> <p>Testers Wanted</p> </li> <li> <p> Zonestar ZM384 (main MCU) (4 colors)</p> <p>Testers Wanted</p> </li> <li> <p> Mini RAMBo (4 colors)</p> <p>Testers Wanted</p> </li> <li> <p> BTT Octopus (main MCU) (4 colors)</p> <p>Testers Wanted</p> </li> <li> <p> Geetech A30T</p> <p>Testers Wanted</p> </li> </ul>"},{"location":"setup/controllers/bttmmb/","title":"BTT MMB","text":"<p>Max filament units: 4</p> <p>MCU Name: <code>3ms</code></p>"},{"location":"setup/controllers/bttmmb/#bom","title":"BOM","text":"Name Price Quantity Link Notes BTT MMB $34.99 1 BTT Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters"},{"location":"setup/controllers/bttmmb/#wiring","title":"Wiring","text":"<p>Route the wires from the NEMA17's to the controller board. Follow this table to determine which port to plug the motors into:</p> Filament Unit # Motor Port 0 M1 1 M2 2 M3 3 M4 <p>Now, grab your 12V PSU and two M-M duponts, one red and one black (M-M means that there is metal coming out of both ends of the cable). Plug the PSU into the wall, but don't plug the screw terminals into the PSU (the screw terminals have green)</p> <ol> <li>Plug the red wire into the positive terminal of the screw terminals</li> <li> <p>Plug the black wire into the negative terminal of the screw terminals</p> <p>Danger</p> <p>These dupont cables are too thin to run much more than the stepper motors. If you run a heater or other power-intensive device off of the MMB board, the duponts and/or PSU can melt/catch fire. To reduce the risk of this, you can double up on the duponts or get thicker wires.</p> </li> <li> <p>Following this image, locate the HVIN and GND inputs (top left) </p> </li> <li>Route the two wires inside closest to the HVIN and GND inputs</li> <li>Using the markings on the board, plug the red wire into the HVIN terminal on the MMB</li> <li>Using the markings on the board, plug the black wire into the GND terminal on the MMB</li> <li> <p>Verify all connections</p> <p>Warning</p> <p>If the wires are plugged into the wrong place, or swapped polarities, your MMB, Stepper motors, and/or PSU can be badly damaged.</p> </li> <li> <p>Plug the PSU screw terminals into the PSU wire</p> </li> </ol> <p>If the MMB lights up, you wired it correctly!</p> <p>Finally, plug the MMB into your Klipper host with the cable that came with it.</p>"},{"location":"setup/controllers/bttoctopusmain/","title":"BTT Octopus (main MCU)","text":"<p>Warning</p> <p>This configuration may not work with the BTT Octopus Pro.</p> <p>Max filament units: 4</p> <p>MCU Name: <code>main</code></p>"},{"location":"setup/controllers/bttoctopusmain/#main-mcu","title":"main MCU","text":"<p>This configuration is a <code>main MCU</code> configuration, meaning that your printer should already be running off a BTT Octopus and you don't need to purchase one.</p>"},{"location":"setup/controllers/bttoctopusmain/#bom","title":"BOM","text":"<p>Per filament unit:</p> <p>1x TMC2209 ($7 each)</p>"},{"location":"setup/controllers/bttoctopusmain/#wiring","title":"Wiring","text":"<p>Route the wires from the NEMA17's to the controller board. Follow this table to determine which port to plug the motors into:</p> Filament Unit # Motor Port 0 MOTOR7 1 MOTOR6 2 MOTOR5 3 MOTOR4"},{"location":"setup/controllers/einsyrambo-skrminie3v2/","title":"Einsy RAMBo (main MCU) with SKR Mini E3 V2","text":"<p>Danger</p> <p>This guide is an expert guide only</p> <p>Info</p> <p>This modification is designed for the Prusa MK3/S/S+, and depends on this Klipper configuration.</p>"},{"location":"setup/controllers/einsyrambo-skrminie3v2/#why","title":"Why?","text":"<p>When printing fast, the TMC2130's on the Einsy RAMBo can get quite loud. The TMC2209's on the SKR Mini are much quieter and support denser microstepping.</p>"},{"location":"setup/controllers/einsyrambo-skrminie3v2/#bom","title":"BOM","text":"Name Price Quantity Link Notes PSU -&gt; Einsy Cable $7.99 1 PartsBuilt3D Stepperonline NEMA17 $9.99 each Amazon 2 Replaces current XY motors"},{"location":"setup/controllers/einsyrambo-skrminie3v2/#wiring","title":"Wiring","text":"<p>First, unplug the 3MS steppers from the SKR Mini, and the XY steppers from the Einsy RAMBo. The motors will need to be switched due to different connector types between boards.</p> <p>This table outlines the major wiring of this modification.</p> Einsy RAMBo SKR Mini E3 V2 Motor PSU+ POWER+ PSU- POWER- XM 3ms0 YM 3ms1 XM X YM Y"},{"location":"setup/controllers/einsyrambo-skrminie3v2/#configuration","title":"Configuration","text":"<p>In your <code>printer.cfg</code>, comment out these lines:</p> printer.cfg<pre><code>#[include klipper-prusa-mk3s/mk3s/steppers.cfg]\n#[include klipper-prusa-mk3s/mk3s/tmc2130.cfg]\n</code></pre> <p>Next, copy the contents of <code>3ms/controllers/einsy_rambo_with_skr_mini/xy-motors.cfg</code> and <code>ze-motors.cfg</code> to <code>klipper-prusa-mk3s/skr/xy.cfg</code>, and <code>klipper-prusa-mk3s/mk3s/ze.cfg</code>, respectively.</p> <p>Add the following new lines:</p> printer.cfg<pre><code>[include klipper-prusa-mk3s/skr/xy.cfg]\n[include klipper-prusa-mk3s/mk3s/ze.cfg]\n</code></pre> <p>Restart Klipper.</p>"},{"location":"setup/controllers/geetech-a30t/","title":"Geetech A30T","text":"<p>Contributed by @ImChrono</p> <p>Max filament units: 7</p> <p>MCU Name: <code>3ms</code></p>"},{"location":"setup/controllers/geetech-a30t/#bom","title":"BOM","text":"Name Price Quantity Link Notes Geetech A30T $34.99 1 Geetech Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 24V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters"},{"location":"setup/controllers/geetech-a30t/#firmware","title":"Firmware","text":"<p>To flash Klipper firmware to the A30T, run the following command and see the following screenshot:</p> <pre><code>cd ~/klipper\nmake menuconfig\n</code></pre> <p></p> <p>Next, connect the BOOT0 jumper on the A30T and run:</p> <pre><code>stm32flash -i ',,,,,' -v -w out/klipper.bin -g 0 /dev/serial/by-id/&lt;your-mcu-id-here&gt;\n</code></pre>"},{"location":"setup/controllers/geetech-a30t/#wiring","title":"Wiring","text":"<p>Route the wires from the NEMA17's to the controller board. Follow this table to determine which port to plug the motors into:</p> Filament Unit # Motor Port 0 X 1 Y 2 Z0 3 Z1 4 E1 5 E2 6 E3 <p>Now, grab your 12V PSU and two M-M duponts, one red and one black (M-M means that there is metal coming out of both ends of the cable). Plug the PSU into the wall, but don't plug the screw terminals into the PSU (the screw terminals have green)</p> <ol> <li>Plug two red wires into the positive terminal of the screw terminals</li> <li> <p>Plug two black wires into the negative terminal of the screw terminals</p> <p>Danger</p> <p>These dupont cables are too thin to run much more than the stepper motors. If you run a heater or other power-intensive device off of the motherboard, the duponts and/or PSU can melt/catch fire. To reduce the risk of this, you can double up on the duponts or get thicker wires.</p> </li> <li> <p>Route the four wires inside closest to your chosen input</p> </li> <li>Using the markings on the board, plug the two red wires into the positive terminal on the motherboard</li> <li>Using the markings on the board, plug the two black wires into the negative terminal on the motherboard</li> <li> <p>Verify all connections</p> <p>Warning</p> <p>If the wires are plugged into the wrong place, or swapped polarities, your motherboard, Stepper motors, and/or PSU can be badly damaged.</p> </li> <li> <p>Plug the PSU screw terminals into the PSU wire</p> </li> </ol> <p>If the motherboard lights up, you wired it correctly!</p> <p>Finally, plug the motherboard into your Klipper host with the cable that came with it.</p>"},{"location":"setup/controllers/minirambo/","title":"Mini RAMBo","text":"<p>Max filament units: 4</p> <p>MCU Name: <code>3ms</code></p>"},{"location":"setup/controllers/minirambo/#bom","title":"BOM","text":"Name Price Quantity Link Notes Mini RAMBo 1 Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters"},{"location":"setup/controllers/minirambo/#wiring","title":"Wiring","text":"<p>Route the wires from the NEMA17's to the controller board. Follow this table to determine which port to plug the motors into:</p> Filament Unit # Motor Port 0 XM 1 YM 2 ZAM or ZBM 3 E0M <p>Now, grab your 12V PSU and two M-M duponts, one red and one black (M-M means that there is metal coming out of both ends of the cable). Plug the PSU into the wall, but don't plug the screw terminals into the PSU (the screw terminals have green)</p> <ol> <li>Plug the red wire into the positive terminal of the screw terminals</li> <li> <p>Plug the black wire into the negative terminal of the screw terminals</p> <p>Danger</p> <p>These dupont cables are too thin to run much more than the stepper motors. If you run a heater or other power-intensive device off of the RAMBo board, the duponts and/or PSU can melt/catch fire. To reduce the risk of this, you can double up on the duponts or get thicker wires.</p> </li> <li> <p>Route the two wires inside closest to your chosen input</p> </li> <li>Using the markings on the board, plug the red wire into the positive terminal on the RAMBo</li> <li>Using the markings on the board, plug the black wire into the negative terminal on the RAMBo</li> <li> <p>Verify all connections</p> <p>Warning</p> <p>If the wires are plugged into the wrong place, or swapped polarities, your RAMBo, Stepper motors, and/or PSU can be badly damaged.</p> </li> <li> <p>Plug the PSU screw terminals into the PSU wire</p> </li> </ol> <p>If the RAMBo lights up, you wired it correctly!</p> <p>Finally, plug the RAMBo into your Klipper host with the cable that came with it.</p>"},{"location":"setup/controllers/skrminie3v2/","title":"BTT SKR Mini E3 V2","text":"<p>Max filament units: 4</p> <p>MCU Name: <code>3ms</code></p>"},{"location":"setup/controllers/skrminie3v2/#bom","title":"BOM","text":"Name Price Quantity Link Notes SKR Mini E3 V2 $34.99 1 Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters"},{"location":"setup/controllers/skrminie3v2/#wiring","title":"Wiring","text":"<p>Route the wires from the NEMA17's to the controller board. Follow this table to determine which port to plug the motors into:</p> Filament Unit # Motor Port 0 XM 1 YM 2 ZAM or ZBM 3 E0M <p>Now, grab your 12V PSU and two M-M duponts, one red and one black (M-M means that there is metal coming out of both ends of the cable). Plug the PSU into the wall, but don't plug the screw terminals into the PSU (the screw terminals have green)</p> <ol> <li>Plug the red wire into the positive terminal of the screw terminals</li> <li> <p>Plug the black wire into the negative terminal of the screw terminals</p> <p>Danger</p> <p>These dupont cables are too thin to run much more than the stepper motors. If you run a heater or other power-intensive device off of the SKR board, the duponts and/or PSU can melt/catch fire. To reduce the risk of this, you can double up on the duponts or get thicker wires.</p> </li> <li> <p>Following this image, choose either the DCIN or POWER input </p> </li> <li>Route the two wires inside closest to your chosen input</li> <li>Using the markings on the board, plug the red wire into the positive terminal on the SKR</li> <li>Using the markings on the board, plug the black wire into the negative terminal on the SKR</li> <li> <p>Verify all connections</p> <p>Warning</p> <p>If the wires are plugged into the wrong place, or swapped polarities, your SKR, Stepper motors, and/or PSU can be badly damaged.</p> </li> <li> <p>Plug the PSU screw terminals into the PSU wire</p> </li> </ol> <p>If the SKR lights up, you wired it correctly!</p> <p>Finally, plug the SKR into your Klipper host with the blue cable that came with it.</p>"},{"location":"setup/controllers/skrpico/","title":"BTT SKR Pico","text":"<p>Max filament units: 4</p> <p>MCU Name: <code>3ms</code></p>"},{"location":"setup/controllers/skrpico/#bom","title":"BOM","text":"Name Price Quantity Link Notes SKR Pico $35.99 1 Amazon Duponts $9.99 1 Amazon These wires are only sufficient to run steppers, not heaters 12V PSU $7.39 1 Amazon This PSU is only sufficient to run steppers, not heaters"},{"location":"setup/controllers/skrpico/#wiring","title":"Wiring","text":"<p>Route the wires from the NEMA17's to the controller board. Follow this table to determine which port to plug the motors into:</p> Filament Unit # Motor Port 0 X 1 Y 2 Z1 or Z2 3 E <p>Now, grab your 12V PSU and two M-M duponts, one red and one black (M-M means that there is metal coming out of both ends of the cable). Plug the PSU into the wall, but don't plug the screw terminals into the PSU (the screw terminals have green)</p> <ol> <li>Plug the red wire into the positive terminal of the screw terminals</li> <li> <p>Plug the black wire into the negative terminal of the screw terminals</p> <p>Danger</p> <p>These dupont cables are too thin to run much more than the stepper motors. If you run a heater or other power-intensive device off of the SKR board, the duponts and/or PSU can melt/catch fire. To reduce the risk of this, you can double up on the duponts or get thicker wires.</p> </li> <li> <p>Following this image, locate the POWER input </p> </li> <li>Route the two wires inside closest to the POWER input</li> <li>Using the markings on the board, plug the red wire into the positive terminal on the SKR</li> <li>Using the markings on the board, plug the black wire into the negative terminal on the SKR</li> <li> <p>Verify all connections</p> <p>Warning</p> <p>If the wires are plugged into the wrong place, or swapped polarities, your SKR, Stepper motors, and/or PSU can be badly damaged.</p> </li> <li> <p>Plug the PSU screw terminals into the PSU wire</p> </li> </ol> <p>If the SKR lights up, you wired it correctly!</p> <p>Finally, plug the SKR into your Klipper host with the blue cable that came with it.</p>"},{"location":"setup/controllers/zm384main/","title":"Zonestar ZM384 (main MCU)","text":"<p>Max filament units: 3</p> <p>MCU Name: <code>main</code></p>"},{"location":"setup/controllers/zm384main/#main-mcu","title":"main MCU","text":"<p>This configuration is a <code>main MCU</code> configuration, meaning that your printer should already be running off a ZM384 and you don't need to purchase one.</p>"},{"location":"setup/controllers/zm384main/#configuration","title":"Configuration","text":"<p>In your <code>3ms/macros.cfg</code>, edit the following section:</p> BeforeAfter macros.cfg<pre><code># Set the sync of provided TOOL to SYNC with extruder\n### --- Comment if using the 3MS instead of your printer's extruder --- ###\n[gcode_macro SET_TOOL_SYNC]\ngcode:\n    {% set tool = params.TOOL|int %}\n    {% set sync = params.SYNC|int %}\n    {% set motion_queue = \"extruder\" if sync == 1 else \"\" %}\n    SYNC_EXTRUDER_MOTION EXTRUDER=3ms{ tool } MOTION_QUEUE={ motion_queue }\n### --- Comment if using the 3MS instead of your printer's extruder --- ###\n# [gcode_macro SET_TOOL_SYNC]\n# gcode:\n#   {% set tool = params.TOOL|int %}\n#   {% set sync = params.SYNC|int %}\n#   {% set ext_name = \"3ms\"+(tool|str) %}\n#   {% if tool == 0 %}\n#     {% set ext_name = \"extruder\" %}\n#   {% endif %}\n#   {% set motion_queue = \"extruder\" if sync == 1 else \"\" %}\n#   SYNC_EXTRUDER_MOTION EXTRUDER={ext_name} MOTION_QUEUE={ motion_queue }\n</code></pre> macros.cfg<pre><code># Set the sync of provided TOOL to SYNC with extruder\n### --- Comment if using the 3MS instead of your printer's extruder --- ###\n# [gcode_macro SET_TOOL_SYNC]\n# gcode:\n#   {% set tool = params.TOOL|int %}\n#   {% set sync = params.SYNC|int %}\n#   {% set motion_queue = \"extruder\" if sync == 1 else \"\" %}\n#   SYNC_EXTRUDER_MOTION EXTRUDER=3ms{ tool } MOTION_QUEUE={ motion_queue }\n### --- Comment if using the 3MS instead of your printer's extruder --- ###\n[gcode_macro SET_TOOL_SYNC]\ngcode:\n  {% set tool = params.TOOL|int %}\n  {% set sync = params.SYNC|int %}\n  {% set ext_name = \"3ms\"+(tool|str) %}\n  {% if tool == 0 %}\n    {% set ext_name = \"extruder\" %}\n  {% endif %}\n  {% set motion_queue = \"extruder\" if sync == 1 else \"\" %}\n  SYNC_EXTRUDER_MOTION EXTRUDER={ext_name} MOTION_QUEUE={ motion_queue }\n</code></pre>"},{"location":"setup/controllers/zm384main/#wiring","title":"Wiring","text":"<p>Route the wires from the NEMA17's to the controller board. Follow this table to determine which port to plug the motors into:</p> Filament Unit # Motor Port 0 E0 1 E1 2 E2 3 E3"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>If you are having trouble getting your 3MS to work properly, check if the problem you're facing is in this list:</p> <ul> <li>Motor Skipping</li> <li>Filament Sensor False Alarm or Extra Pauses</li> <li>Underextrusion</li> <li>Failed Load/Unload</li> </ul> <p>If it is not in this list, please open an issue on Github.</p>"},{"location":"troubleshooting/failedloadunload/","title":"Failed Load/Unload","text":"<p>If your printer is paused and displaying <code>Please load</code> or <code>Please unload</code>, follow this troubleshooting guide to diagnose the problem and fix it.</p>"},{"location":"troubleshooting/failedloadunload/#false-alarm","title":"False Alarm","text":"<p>First, see False Alarm to ensure your filament sensor is properly configured and is being properly read by the 3MS macros.</p>"},{"location":"troubleshooting/failedloadunload/#failed-unload","title":"Failed Unload","text":"<p>When your printer displays a <code>Please unload</code> message, pay attention to the <code>Tx</code> number it shows. For example, if it displays the message <code>Please unload T0</code>, it failed to unload the filament at T0. Follow these steps to recover the toolchange:</p> <ol> <li>Detach the PTFE tube from the inlet of your printer's extruder (you may need to push down the lever on the 3MS extruder for that tool while doing this).</li> <li> <p>Manually pull the filament out of the printer's extruder.</p> <p>If it is stuck, try one of the following:</p> <ul> <li>Reload the filament until it is extruding out of the nozzle, then unload the filament quickly while pulling firmly.</li> <li>Open  your printer's extruder assembly, pull the filament through, and cut off the tip.</li> </ul> <p>Also, see Skipping</p> </li> <li> <p>Next, manually pull the filament all the way to where the filament is usually parked between toolchanges (before the Y-splitter).</p> </li> <li>Manually load the next filament. Check the console for a message like <code>T0 -&gt; T1</code> indicating which filament is next (in this case T1). It should be loaded to the entry of the printer's extruder gears.</li> <li>Resume your print.</li> </ol> <p>Next, diagnose the problem based on these possible scenarios:</p> <ul> <li> <p>Filament never unloaded out of printer's extruder</p> <p>This is a sign of poor tip shaping. The quick fix for this is to increase print temperatures. Also, see Skipping.</p> </li> <li> <p>Filament unloaded out of printer's extruder, but stopped before filament sensor</p> <p>This is a sign of your filament sensor causing excess friction on the filament, or your 3MS extruder tension too loose. For the 3MS tension too lose, simply rotate the tensioning screw on the 3MS extruder clockwise a couple rotations.</p> </li> </ul>"},{"location":"troubleshooting/failedloadunload/#failed-load","title":"Failed Load","text":"<p>When your printer displays a <code>Please load</code> message, pay attention to the <code>Tx</code> number it shows. For example, if it displays the message <code>Please load T1</code>, it failed to load the filament at T1. Follow these steps to recover the toolchange:</p> <ol> <li> <p>Manually push the filament all the way to the inlet of your printer's extruder.</p> <p>If your filament isn't able to load, the previous tool may not have completely unloaded. See Failed Unload for more information.</p> </li> <li> <p>Resume your print.</p> </li> </ol> <p>Next, diagnose the problem based on these possible scenarios:</p> <ul> <li> <p>Previous filament didn't unload enough</p> <p>Increase your <code>unload_distance</code> in <code>MMMS_SETTINGS</code> (<code>3ms/settings.py</code>). You can test different values by using <code>SET_MMMS_SETTINGS</code> at runtime. Example:</p> <pre><code>SET_MMMS_SETTINGS UNLOAD_DISTANCE=210\n</code></pre> </li> <li> <p>Filament didn't load enough</p> <p>Increase your <code>load_distance</code> in <code>MMMS_SETTINGS</code> (<code>3ms/settings.py</code>). You can test different values by using <code>SET_MMMS_SETTINGS</code> at runtime. Example:</p> <pre><code>SET_MMMS_SETTINGS LOAD_DISTANCE=220\n</code></pre> </li> </ul>"},{"location":"troubleshooting/falsealarm/","title":"Filament Sensor False Alarm/Extra Pauses","text":"<p>If during toolchanges, a failed toolchange false alarm occurs (print pauses even though toolchange was successful), follow this troubleshooting guide to fix it.</p>"},{"location":"troubleshooting/falsealarm/#fsensor_delay","title":"fsensor_delay","text":"<p>The main culprit for this issue is likely your <code>fsensor_delay</code> in <code>3ms/settings.cfg</code> is too short. Short values will cause more false alarms, and long values will cause less. Generally, the default 2000ms is good for most setups, but if you are having false alarms, you will have to increase it. To set it, use the <code>SET_MMMS_SETTINGS</code> command:</p> Klipper Console<pre><code>SET_MMMS_SETTINGS FSENSOR_DELAY=3000\n</code></pre> <p>To save it permanently:</p> BeforeAfter 3ms/settings.cfg<pre><code>fsensor_delay: 2000\n</code></pre> 3ms/settings.cfg<pre><code>fsensor_delay: 3000\n</code></pre>"},{"location":"troubleshooting/skipping/","title":"Motor Skipping","text":"<p>If any of your extruder motors are skipping while using the 3MS, follow this troubleshooting guide to diagnose the issue and fix it.</p>"},{"location":"troubleshooting/skipping/#printers-extruder","title":"Printer's Extruder","text":"<p>First, check if your printer's extruder is properly extruding. To check this, detach the PTFE tube from the inlet of your extruder, and manually load filament, using Klipper's controls for loading filament. If your printer's extruder is having trouble extruding plastic, you may have one of the following:</p> <ul> <li>Nozzle clog</li> <li>Heat creep jam</li> </ul> <p>You can also slightly decrease the 3MS's <code>rotation_distance</code>.</p>"},{"location":"troubleshooting/skipping/#3ms-extruder","title":"3MS Extruder","text":"<p>If the printer's extruder is working properly, and you're still having skipping, check the filament tips. If the tip has a long string on it, or has a thick blob at the end, your filament tips may be to blame. If you have stringy tips, decrease your nozzle temperature while printing. If you have blobby tips, increase your nozzle temperature while printing. Alternatively, you can purchase PTFE tubes with a larger ID to allow for less precise tips.</p> <p>You can also slightly increase the 3MS's <code>rotation_distance</code>.</p>"},{"location":"troubleshooting/underextrusion/","title":"Underextrusion","text":"<p>If your prints start to have gaps in the walls, you are likely experiencing underextrusion. Follow this troubleshooting guide to diagnose the issue and fix it.</p>"},{"location":"troubleshooting/underextrusion/#extruderhotend-issues","title":"Extruder/Hotend Issues","text":"<p>First, try the solutions in this article in case there are any issues with your printer's extruder/hotend.</p>"},{"location":"troubleshooting/underextrusion/#3ms-rotation_distance","title":"3MS rotation_distance","text":"<p>If your extruder and hotend are working fine, the next likely cause of underextrusion is your 3MS rotation_distance is too high. There are two likely causes and solutions, based on where in the print the underextrusion occurs:</p> <ul> <li> <p>Whole print - 3MS motors working backwards from the extruder or not working at all</p> <p>Follow the wiring section of Assembly.</p> <p>Follow the first two steps of Stepper Setup.</p> </li> <li> <p>Partially through print - 3MS motors not turning enough</p> <p>Follow the last step of Stepper Setup.</p> </li> </ul>"}]}